{"version":3,"file":"js/403.08a85daf.js","mappings":"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","sources":["webpack://signance-frontend/./src/views/MediaManager.vue","webpack://signance-frontend/./src/views/MediaManager.vue?b328"],"sourcesContent":["<template>\n  <div class=\"media-manager\">\n    <!-- Theme Toggle -->\n    <ThemeToggle class=\"theme-toggle\" />\n    \n    <!-- Header Section -->\n    <div class=\"manager-header\">\n      <div class=\"header-content\">\n        <div class=\"header-info\">\n          <h1>\n            <q-icon name=\"perm_media\" class=\"header-icon\" />\n            Gestión de Medios\n          </h1>\n          <p>Administra tu biblioteca multimedia completa</p>\n        </div>\n        <div class=\"header-actions\">\n          <q-btn\n            label=\"Volver al Admin\"\n            icon=\"arrow_back\"\n            color=\"white\"\n            unelevated\n            class=\"back-btn\"\n            @click=\"$router.push('/admin')\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <!-- Content Section -->\n    <div class=\"manager-content\">\n      <!-- Upload Section -->\n      <div class=\"upload-section\">\n        <div class=\"section-title\">\n          <h3>\n            <q-icon name=\"cloud_upload\" />\n            Subir Nuevo Contenido\n          </h3>\n        </div>\n        <MediaUploader \n          @upload-complete=\"handleUploadComplete\"\n          @upload-error=\"handleUploadError\"\n        />\n      </div>\n\n      <!-- Media Gallery Section -->\n      <div class=\"gallery-section\">\n        <MediaGallery\n          :media-files=\"mediaFiles\"\n          :backend-base-url=\"backendBaseUrl\"\n          :loading=\"mediaLoading\"\n          mode=\"full\"\n          title=\"Biblioteca Multimedia\"\n          subtitle=\"Gestiona tu biblioteca completa\"\n          @refresh=\"loadMedia\"\n          @edit=\"editMedia\"\n          @delete=\"deleteMedia\"\n        />\n      </div>\n    </div>\n\n    <!-- Edit Media Dialog -->\n    <EditMediaDialog\n      v-model=\"editDialog\"\n      :media=\"selectedMedia\"\n      @save=\"handleEditSave\"\n    />\n\n    <!-- Edit Media Dialog -->\n    <EditMediaDialog\n      v-model=\"editDialog\"\n      :media=\"selectedMedia\"\n      @save=\"handleEditSave\"\n    />\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useToast } from 'vue-toastification'\nimport { useQuasar } from 'quasar'\n\n// Componentes\nimport ThemeToggle from '../components/ThemeToggle.vue'\nimport MediaUploader from '../components/MediaUploader.vue'\nimport MediaGallery from '../components/dashboard/MediaGallery.vue'\nimport EditMediaDialog from '../components/dashboard/dialogs/EditMediaDialog.vue'\n\n// Composables y servicios\nimport { useTheme } from '../composables/useTheme'\nimport { useMediaUrl } from '../composables/useMediaUrl'\nimport { mediaAPI } from '../services/api'\n\nexport default {\n  name: 'MediaManager',\n  components: {\n    ThemeToggle,\n    MediaUploader,\n    MediaGallery,\n    EditMediaDialog\n  },\n  setup() {\n    console.log('🎬 MediaManager component setup() called')\n    console.log('📍 Current URL:', window.location.href)\n    \n    const $router = useRouter()\n    const $route = useRoute()\n    const toast = useToast()\n    const $q = useQuasar()\n    const { isDarkMode } = useTheme()\n    const { backendBaseUrl } = useMediaUrl()\n    \n    // Estados reactivos\n    const mediaFiles = ref([])\n    const mediaLoading = ref(false)\n    const editDialog = ref(false)\n    const selectedMedia = ref(null)\n\n    // Cargar medios\n    const loadMedia = async () => {\n      console.log('📁 Cargando medios...')\n      mediaLoading.value = true\n      try {\n        const response = await mediaAPI.list()\n        mediaFiles.value = response.data || []\n        console.log(`✅ ${mediaFiles.value.length} archivos multimedia cargados`)\n      } catch (error) {\n        console.error('❌ Error cargando medios:', error)\n        toast.error('Error al cargar los archivos multimedia')\n        mediaFiles.value = []\n      } finally {\n        mediaLoading.value = false\n      }\n    }\n\n    // Actualizar medio\n    const updateMedia = async (mediaId, updateData) => {\n      try {\n        await mediaAPI.update(mediaId, updateData)\n        return true\n      } catch (error) {\n        console.error('❌ Error actualizando medio:', error)\n        throw error\n      }\n    }\n\n    // Eliminar medio\n    const deleteMediaFile = async (mediaId) => {\n      try {\n        await mediaAPI.delete(mediaId)\n        return true\n      } catch (error) {\n        console.error('❌ Error eliminando medio:', error)\n        throw error\n      }\n    }\n\n    // Manejar subida exitosa\n    const handleUploadComplete = (newMedia) => {\n      console.log('✅ Archivo subido exitosamente:', newMedia)\n      toast.success(`Archivo \"${newMedia.filename}\" subido correctamente`)\n      loadMedia() // Recargar la lista\n    }\n\n    // Manejar error de subida\n    const handleUploadError = (error) => {\n      console.error('❌ Error en subida:', error)\n      toast.error('Error al subir el archivo')\n    }\n\n    // Editar medio\n    const editMedia = (media) => {\n      console.log('✏️ Editando medio:', media)\n      selectedMedia.value = media\n      editDialog.value = true\n    }\n\n    // Manejar guardado de edición\n    const handleEditSave = async (updatedMedia) => {\n      try {\n        await updateMedia(updatedMedia.id, updatedMedia)\n        toast.success('Medio actualizado correctamente')\n        editDialog.value = false\n        loadMedia() // Recargar la lista\n      } catch (error) {\n        console.error('❌ Error actualizando medio:', error)\n        toast.error('Error al actualizar el medio')\n      }\n    }\n\n    // Eliminar medio\n    const deleteMedia = async (mediaId) => {\n      $q.dialog({\n        title: 'Confirmar eliminación',\n        message: '¿Estás seguro de que quieres eliminar este archivo multimedia?',\n        cancel: true,\n        persistent: true\n      }).onOk(async () => {\n        try {\n          await deleteMediaFile(mediaId)\n          toast.success('Archivo eliminado correctamente')\n          loadMedia() // Recargar la lista\n        } catch (error) {\n          console.error('❌ Error eliminando medio:', error)\n          toast.error('Error al eliminar el archivo')\n        }\n      })\n    }\n\n    // Inicialización\n    onMounted(async () => {\n      console.log('🚀 MediaManager mounted')\n      $q.dark.set(isDarkMode.value)\n      await loadMedia()\n    })\n\n    return {\n      // Estados\n      mediaFiles,\n      mediaLoading,\n      editDialog,\n      selectedMedia,\n      backendBaseUrl,\n      $route,\n      \n      // Métodos\n      loadMedia,\n      handleUploadComplete,\n      handleUploadError,\n      editMedia,\n      handleEditSave,\n      deleteMedia\n    }\n  }\n}\n</script>\n\n<style scoped>\n.media-manager {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n  color: #333;\n}\n\n.body--dark .media-manager {\n  background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);\n  color: #e2e8f0;\n}\n\n.theme-toggle {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  z-index: 1000;\n}\n\n/* Header Styles */\n.manager-header {\n  background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #06b6d4 100%);\n  padding: 60px 20px 40px;\n  margin-bottom: 30px;\n}\n\n.header-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  gap: 20px;\n}\n\n.header-info h1 {\n  color: white;\n  font-size: 2.5rem;\n  font-weight: 600;\n  margin: 0 0 10px 0;\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}\n\n.header-icon {\n  font-size: 3rem !important;\n}\n\n.header-info p {\n  color: rgba(255, 255, 255, 0.9);\n  font-size: 1.2rem;\n  margin: 0;\n}\n\n.header-actions {\n  display: flex;\n  gap: 12px;\n}\n\n.back-btn {\n  background: rgba(255, 255, 255, 0.2) !important;\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white !important;\n  font-weight: 600;\n  padding: 8px 16px;\n  border-radius: 8px;\n  transition: all 0.3s ease;\n}\n\n.back-btn:hover {\n  background: rgba(255, 255, 255, 0.3) !important;\n  border-color: rgba(255, 255, 255, 0.5);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n}\n\n/* Content Styles */\n.manager-content {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px 40px;\n  display: flex;\n  flex-direction: column;\n  gap: 40px;\n}\n\n.upload-section,\n.gallery-section {\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 16px;\n  padding: 30px;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e5e7eb;\n}\n\n.body--dark .upload-section,\n.body--dark .gallery-section {\n  background: rgba(30, 30, 30, 0.95);\n  border-color: #374151;\n}\n\n.section-title {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 20px;\n  padding-bottom: 15px;\n  border-bottom: 2px solid #e5e7eb;\n}\n\n.body--dark .section-title {\n  border-bottom-color: #374151;\n}\n\n.section-title h3 {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: #1f2937;\n  margin: 0;\n}\n\n.body--dark .section-title h3 {\n  color: #e2e8f0;\n}\n\n.section-title .q-icon {\n  color: #6366f1;\n  font-size: 1.8rem;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n  .header-content {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n  \n  .header-info h1 {\n    font-size: 2rem;\n  }\n  \n  .manager-content {\n    padding: 0 15px 40px;\n  }\n  \n  .upload-section,\n  .gallery-section {\n    padding: 20px;\n  }\n  \n  .section-title {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n}\n</style>\n","import { render } from \"./MediaManager.vue?vue&type=template&id=961aeda2&scoped=true\"\nimport script from \"./MediaManager.vue?vue&type=script&lang=js\"\nexport * from \"./MediaManager.vue?vue&type=script&lang=js\"\n\nimport \"./MediaManager.vue?vue&type=style&index=0&id=961aeda2&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-961aeda2\"]])\n\nexport default __exports__"],"names":["class","name","label","icon","color","unelevated","$router","push","handleUploadComplete","handleUploadError","mediaFiles","backendBaseUrl","loading","mediaLoading","mode","title","subtitle","loadMedia","editMedia","deleteMedia","editDialog","media","selectedMedia","handleEditSave","components","ThemeToggle","MediaUploader","MediaGallery","EditMediaDialog","setup","console","log","window","location","href","$route","toast","$q","isDarkMode","useTheme","useMediaUrl","async","value","response","list","data","length","error","updateMedia","mediaId","updateData","update","deleteMediaFile","delete","newMedia","success","filename","updatedMedia","id","dialog","message","cancel","persistent","onOk","dark","set","__exports__","render"],"sourceRoot":""}