(function(){"use strict";var e={95:function(e,a,t){function o(){console.log("ðŸ”§ Corrigiendo tamaÃ±os de iconos...");const e=document.querySelectorAll(".q-icon");e.forEach((e=>{e.style.fontFamily&&e.style.fontFamily.includes("Material Icons")||(e.style.fontFamily="Material Icons, Material Icons Outlined, Material Icons Round, Material Icons Sharp, Material Icons Two Tone"),!e.style.fontSize||"16px"!==e.style.fontSize&&"14px"!==e.style.fontSize&&"24px"!==e.style.fontSize||e.style.removeProperty("font-size"),!e.style.width||"16px"!==e.style.width&&"14px"!==e.style.width&&"24px"!==e.style.width||e.style.removeProperty("width"),!e.style.height||"16px"!==e.style.height&&"14px"!==e.style.height&&"24px"!==e.style.height||e.style.removeProperty("height")})),console.log("âœ… TamaÃ±os corregidos para "+e.length+" iconos")}function n(){const e=document.querySelectorAll(".q-icon");console.log("ðŸ” Verificando tamaÃ±os de iconos:"),e.forEach(((e,a)=>{const t=window.getComputedStyle(e);console.log("Icono "+(a+1)+":",{fontSize:t.fontSize,width:t.width,height:t.height,fontFamily:t.fontFamily,classes:e.className})}))}function l(){console.log("ðŸ”„ Reseteando tamaÃ±os de iconos a valores por defecto de Quasar...");const e=document.querySelectorAll(".q-icon");e.forEach((e=>{e.style.removeProperty("font-size"),e.style.removeProperty("width"),e.style.removeProperty("height"),e.style.fontFamily="Material Icons, Material Icons Outlined, Material Icons Round, Material Icons Sharp, Material Icons Two Tone"})),console.log("âœ… TamaÃ±os reseteados para "+e.length+" iconos")}function s(){const e=document.querySelector("#icon-size-fixes");e&&e.remove();const a="\n    /* CorrecciÃ³n especÃ­fica para mantener el sistema de tamaÃ±os de Quasar */\n    .q-icon {\n      font-family: 'Material Icons' !important;\n      /* Permitir que Quasar maneje todos los tamaÃ±os automÃ¡ticamente */\n    }\n    \n    /* Asegurar que las clases de tamaÃ±o de Quasar NO sean sobrescritas */\n    .q-icon.text-xs,\n    .q-icon.text-sm,\n    .q-icon.text-base,\n    .q-icon.text-lg,\n    .q-icon.text-xl,\n    .q-icon.text-2xl,\n    .q-icon.text-3xl,\n    .q-icon.text-4xl,\n    .q-icon.text-5xl,\n    .q-icon.text-6xl {\n      /* Dejar que Quasar maneje estos tamaÃ±os naturalmente */\n    }\n  ",t=document.createElement("style");t.id="icon-size-fixes",t.textContent=a,document.head.appendChild(t),console.log("âœ… CSS de correcciÃ³n de tamaÃ±os aplicado (sin sobreescribir)")}function i(){const e=document.createElement("div");e.id="icon-size-test",e.style.position="fixed",e.style.top="10px",e.style.right="10px",e.style.background="white",e.style.padding="10px",e.style.border="1px solid black",e.style.zIndex="9999";const a=["xs","sm","md","lg","xl"];a.forEach((a=>{const t=document.createElement("i");t.className="q-icon material-icons",t.style.fontSize="xs"===a?"12px":"sm"===a?"16px":"md"===a?"20px":"lg"===a?"24px":"32px",t.textContent="home";const o=document.createElement("span");o.textContent=" "+a+" ",e.appendChild(t),e.appendChild(o)}));const t=document.createElement("button");t.textContent="X",t.onclick=()=>document.body.removeChild(e),e.appendChild(t),document.body.appendChild(e),console.log("âœ… Test de tamaÃ±os de iconos agregado a la pÃ¡gina")}t.d(a,{A0:function(){return s},GB:function(){return i},jt:function(){return l},l8:function(){return o},xq:function(){return n}})},170:function(e,a,t){var o=t(751),n=t(641);const l={id:"app"};function s(e,a,t,o,s,i){const r=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.bF)(r)])}var i=t(349),r={name:"App",mounted(){console.log("ðŸŽ¬ Pochtecayotl Signance System - Frontend iniciado"),this.checkBackendConnection(),this.initializeIconFixes()},methods:{async checkBackendConnection(){try{const e=await i["default"].detectBackend();console.log(`âœ… ConexiÃ³n con backend establecida en ${e.baseUrl}`)}catch(e){console.error("âŒ No se puede conectar con el backend:",e),this.$q.notify({type:"warning",message:"No se puede conectar con el servidor",caption:"Verifica que el backend estÃ© ejecutÃ¡ndose en el rango de puertos 8000-8010"})}},initializeIconFixes(){console.log("ðŸŽ¨ Inicializando correcciones de iconos..."),this.checkMaterialIconsAvailability(),this.applyIconCSS(),this.applyIconSizeCorrections(),setTimeout((()=>{this.verifyIconsAfterLoad()}),2e3)},checkMaterialIconsAvailability(){if(document.fonts){const e=document.fonts.check('1rem "Material Icons"');console.log("ðŸ” Material Icons disponible:",e),e||(console.log("âš ï¸ Material Icons no cargado, intentando forzar carga..."),this.forceLoadMaterialIcons())}},forceLoadMaterialIcons(){const e=document.querySelector('link[href*="material-icons"]');if(!e){const e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap",e.onload=()=>{console.log("âœ… Material Icons cargado desde Google Fonts")},document.head.appendChild(e)}},applyIconCSS(){const e="\n        /* CorrecciÃ³n global para Material Icons - SIN interferir con tamaÃ±os */\n        .material-icons, .q-icon {\n          font-family: 'Material Icons' !important;\n          font-weight: normal !important;\n          font-style: normal !important;\n          line-height: 1 !important;\n          letter-spacing: normal !important;\n          text-transform: none !important;\n          display: inline-block !important;\n          white-space: nowrap !important;\n          word-wrap: normal !important;\n          direction: ltr !important;\n          font-feature-settings: 'liga' !important;\n          -webkit-font-feature-settings: 'liga' !important;\n          -webkit-font-smoothing: antialiased !important;\n          -moz-osx-font-smoothing: grayscale !important;\n          /* NO forzamos font-size para permitir que Quasar lo maneje */\n        }\n      ",a=document.createElement("style");a.textContent=e,document.head.appendChild(a)},applyIconSizeCorrections(){console.log("âš ï¸ Saltando correcciones de tamaÃ±o para permitir que Quasar las maneje")},verifyIconsAfterLoad(){const e=document.querySelectorAll(".q-icon");console.log(`ðŸ” Verificando ${e.length} elementos de iconos...`),e.forEach(((e,a)=>{const t=window.getComputedStyle(e),o=t.fontFamily;o.includes("Material Icons")||(console.warn(`âš ï¸ Icono ${a} no usa Material Icons:`,o),e.style.fontFamily='"Material Icons" !important')}))}}},c=t(262);const d=(0,c.A)(r,[["render",s]]);var u=d,m=t(220);const p={class:"login-container"},g={class:"theme-toggle-container"},v={class:"login-content"},h={class:"login-header"},f={class:"logo-container"},k={class:"input-group"},y={class:"input-group"},b={class:"login-actions"};function L(e,a,t,o,l,s){const i=(0,n.g2)("ThemeToggle"),r=(0,n.g2)("q-icon"),c=(0,n.g2)("q-card-section"),d=(0,n.g2)("q-input"),u=(0,n.g2)("q-btn"),m=(0,n.g2)("q-form"),L=(0,n.g2)("q-card"),_=(0,n.g2)("q-card-actions"),F=(0,n.g2)("q-dialog");return(0,n.uX)(),(0,n.CE)("div",p,[(0,n.Lk)("div",g,[(0,n.bF)(i)]),(0,n.Lk)("div",v,[(0,n.bF)(L,{class:"login-card"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"text-center login-header-section"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",h,[(0,n.Lk)("div",f,[(0,n.bF)(r,{name:"video_library",class:"main-logo"}),a[5]||(a[5]=(0,n.Lk)("div",{class:"logo-glow"},null,-1))]),a[6]||(a[6]=(0,n.Lk)("h2",{class:"app-title"},"Pochtecayotl",-1)),a[7]||(a[7]=(0,n.Lk)("h3",{class:"app-subtitle-main"},"Signance System",-1)),a[8]||(a[8]=(0,n.Lk)("p",{class:"app-subtitle"},"Sistema de GestiÃ³n de Anuncios Digitales",-1)),a[9]||(a[9]=(0,n.Lk)("div",{class:"pride-divider"},null,-1))])])),_:1}),(0,n.bF)(c,{class:"login-form-section"},{default:(0,n.k6)((()=>[(0,n.bF)(m,{onSubmit:o.handleLogin,class:"login-form"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",k,[(0,n.bF)(d,{modelValue:o.credentials.username,"onUpdate:modelValue":a[0]||(a[0]=e=>o.credentials.username=e),label:"Usuario",outlined:"",dense:"",rules:[e=>!!e||"El usuario es requerido"],ref:"usernameRef",class:"modern-input"},{prepend:(0,n.k6)((()=>[(0,n.bF)(r,{name:"person",class:"input-icon"})])),_:1},8,["modelValue","rules"])]),(0,n.Lk)("div",y,[(0,n.bF)(d,{modelValue:o.credentials.password,"onUpdate:modelValue":a[1]||(a[1]=e=>o.credentials.password=e),label:"ContraseÃ±a",type:"password",outlined:"",dense:"",rules:[e=>!!e||"La contraseÃ±a es requerida"],ref:"passwordRef",class:"modern-input"},{prepend:(0,n.k6)((()=>[(0,n.bF)(r,{name:"lock",class:"input-icon"})])),_:1},8,["modelValue","rules"])]),(0,n.Lk)("div",b,[(0,n.bF)(u,{type:"submit",label:"Iniciar SesiÃ³n",class:"login-btn",size:"md",unelevated:"",loading:o.isLoading,disable:!o.credentials.username||!o.credentials.password},null,8,["loading","disable"])])])),_:1},8,["onSubmit"])])),_:1}),(0,n.bF)(c,{class:"text-center footer-section"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{flat:"",label:"Probar ConexiÃ³n",onClick:o.testBackendConnection,size:"sm",class:"test-btn"},null,8,["onClick"])])),_:1})])),_:1})]),(0,n.bF)(F,{modelValue:o.showSetupDialog,"onUpdate:modelValue":a[4]||(a[4]=e=>o.showSetupDialog=e),persistent:""},{default:(0,n.k6)((()=>[(0,n.bF)(L,{class:"setup-dialog-card",style:{"min-width":"400px"}},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"setup-header row items-center"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{name:"admin_panel_settings",size:"2rem",color:"orange"}),a[10]||(a[10]=(0,n.Lk)("span",{class:"q-ml-sm text-h6 setup-title"},"ConfiguraciÃ³n Inicial",-1))])),_:1,__:[10]}),(0,n.bF)(c,{class:"setup-content"},{default:(0,n.k6)((()=>[a[11]||(a[11]=(0,n.Lk)("p",{class:"setup-description"},"El sistema necesita configuraciÃ³n inicial. Crea el usuario administrador:",-1)),(0,n.bF)(m,{onSubmit:o.handleSetupAdmin,class:"q-gutter-md"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{modelValue:o.setupData.username,"onUpdate:modelValue":a[2]||(a[2]=e=>o.setupData.username=e),label:"Usuario Administrador",outlined:"",class:"setup-input",rules:[e=>!!e||"Requerido"]},null,8,["modelValue","rules"]),(0,n.bF)(d,{modelValue:o.setupData.password,"onUpdate:modelValue":a[3]||(a[3]=e=>o.setupData.password=e),label:"ContraseÃ±a",type:"password",outlined:"",class:"setup-input",rules:[e=>!!e||"Requerido"]},null,8,["modelValue","rules"])])),_:1},8,["onSubmit"])])),_:1,__:[11]}),(0,n.bF)(_,{align:"right",class:"setup-actions"},{default:(0,n.k6)((()=>[(0,n.bF)(u,{label:"Configurar",color:"primary",class:"setup-btn",onClick:o.handleSetupAdmin,loading:o.isSetupLoading},null,8,["onClick","loading"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var _=t(953),F=t(840),C=t(246),w=t(889),E=t(725),S=t(697),P={name:"LoginView",components:{ThemeToggle:S.A},setup(){const e=(0,m.rd)(),a=(0,F.Jud)(),t=(0,C.dj)(),{loadTheme:o}=(0,E.D)(),l=(0,_.KR)(!1),s=(0,_.KR)(!1),i=(0,_.KR)(!1),r=(0,_.Kh)({username:"",password:""}),c=(0,_.Kh)({username:"admin",password:""}),d=async()=>{try{const e=await w.R2.checkSetup();e.data.setup_required&&(i.value=!0,t.info("Se requiere configuraciÃ³n inicial del sistema"))}catch(e){console.error("Error verificando setup:",e),t.error("Error conectando con el servidor")}},u=async()=>{if(c.username&&c.password){s.value=!0;try{await w.R2.setupAdmin(c),t.success("Administrador configurado exitosamente"),i.value=!1,r.username=c.username,r.password=c.password,await p()}catch(e){console.error("Error en setup:",e),t.error("Error configurando administrador")}finally{s.value=!1}}else t.warning("Completa todos los campos")},p=async()=>{l.value=!0;try{const a=await w.R2.login(r),{access_token:o}=a.data;localStorage.setItem("signance_token",o),t.success(`Â¡Bienvenido, ${r.username}!`),e.push("/admin")}catch(a){console.error("Error en login:",a),401===a.response?.status?t.error("Credenciales incorrectas"):t.error("Error iniciando sesiÃ³n"),r.password=""}finally{l.value=!1}},g=async()=>{a.loading.show({message:"Probando conexiÃ³n..."});try{const e=await fetch("http://127.0.0.1:8000/health");if(e.ok){const a=await e.json();t.success(`ConexiÃ³n exitosa: ${a.status}`)}else t.warning("El servidor responde pero con errores")}catch(e){console.error("Error de conexiÃ³n:",e),t.error("No se puede conectar con el servidor")}finally{a.loading.hide()}},v=()=>{const a=localStorage.getItem("signance_token");a&&e.push("/test-ok")};return(0,n.sV)((()=>{o(),v(),d()})),{credentials:r,setupData:c,isLoading:l,isSetupLoading:s,showSetupDialog:i,handleLogin:p,handleSetupAdmin:u,testBackendConnection:g}}};const x=(0,c.A)(P,[["render",L],["__scopeId","data-v-ff55de2c"]]);var M=x,I=t(33);const A={class:"test-ok-container"},D={class:"signance-container"},$={class:"success-header"},q={class:"success-icon"},T={class:"info-card user-info"},z={class:"card-header"},U={class:"header-text"},R={class:"info-card tests-card"},B={class:"tests-grid"},V={class:"test-icon"},N={class:"test-info"},X={class:"test-action"},W={class:"info-card actions-card"},K={class:"actions-grid"},O={class:"logout-section"},Q={class:"info-card system-info"},j={class:"system-details"},G={class:"detail-item"},H={class:"detail-value"},J={class:"detail-item"},Z={class:"detail-value"},Y={class:"detail-item"},ee={class:"detail-value"},ae={class:"detail-item"},te={class:"detail-value"};function oe(e,a,t,o,l,s){const i=(0,n.g2)("ThemeToggle"),r=(0,n.g2)("q-icon"),c=(0,n.g2)("q-btn"),d=(0,n.g2)("q-chip");return(0,n.uX)(),(0,n.CE)("div",A,[(0,n.bF)(i,{class:"theme-toggle"}),(0,n.Lk)("div",D,[(0,n.Lk)("div",$,[(0,n.Lk)("div",q,[(0,n.bF)(r,{name:"check_circle",size:"4rem"})]),a[4]||(a[4]=(0,n.Lk)("h2",null,"Â¡Sistema Funcionando Correctamente!",-1)),a[5]||(a[5]=(0,n.Lk)("p",null,"Pochtecayotl Signance System - AutenticaciÃ³n Exitosa",-1))]),(0,n.Lk)("div",T,[(0,n.Lk)("div",z,[(0,n.bF)(r,{name:"person",size:"2rem"}),(0,n.Lk)("div",U,[a[6]||(a[6]=(0,n.Lk)("h3",null,"Usuario Autenticado",-1)),(0,n.Lk)("p",null,(0,I.v_)(o.userInfo.username||"Cargando..."),1)])])]),(0,n.Lk)("div",R,[a[7]||(a[7]=(0,n.Lk)("div",{class:"card-title"},[(0,n.Lk)("h3",null,"Pruebas del Sistema")],-1)),(0,n.Lk)("div",B,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.systemTests,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.name,class:(0,I.C4)(["test-item",{"test-success":"success"===e.status,"test-error":"error"===e.status,"test-testing":"testing"===e.status}])},[(0,n.Lk)("div",V,[(0,n.bF)(r,{name:"success"===e.status?"check_circle":"error"===e.status?"error":"hourglass_empty",size:"1.5rem"},null,8,["name"])]),(0,n.Lk)("div",N,[(0,n.Lk)("h4",null,(0,I.v_)(e.name),1),(0,n.Lk)("p",null,(0,I.v_)(e.description),1)]),(0,n.Lk)("div",X,[(0,n.bF)(c,{flat:"",round:"",icon:"testing"===e.status?"refresh":"play_arrow",onClick:a=>o.runTest(e),loading:"testing"===e.status,size:"sm",color:"success"===e.status?"positive":"primary"},null,8,["icon","onClick","loading","color"])])],2)))),128))])]),(0,n.Lk)("div",W,[a[12]||(a[12]=(0,n.Lk)("div",{class:"card-title"},[(0,n.Lk)("h3",null,"Acciones Disponibles")],-1)),(0,n.Lk)("div",K,[(0,n.Lk)("div",{class:"action-button primary-action",onClick:a[0]||(a[0]=(...e)=>o.goToDashboard&&o.goToDashboard(...e))},[(0,n.bF)(r,{name:"dashboard",size:"2rem"}),a[8]||(a[8]=(0,n.Lk)("span",null,"Dashboard",-1))]),(0,n.Lk)("div",{class:"action-button secondary-action",onClick:a[1]||(a[1]=(...e)=>o.goToMediaManager&&o.goToMediaManager(...e))},[(0,n.bF)(r,{name:"cloud_upload",size:"2rem"}),a[9]||(a[9]=(0,n.Lk)("span",null,"GestiÃ³n de Media",-1))]),(0,n.Lk)("div",{class:"action-button accent-action",onClick:a[2]||(a[2]=(...e)=>o.goToConfig&&o.goToConfig(...e))},[(0,n.bF)(r,{name:"settings",size:"2rem"}),a[10]||(a[10]=(0,n.Lk)("span",null,"ConfiguraciÃ³n",-1))]),(0,n.Lk)("div",{class:"action-button warning-action",onClick:a[3]||(a[3]=(...e)=>o.goToErrorPage&&o.goToErrorPage(...e))},[(0,n.bF)(r,{name:"bug_report",size:"2rem"}),a[11]||(a[11]=(0,n.Lk)("span",null,"Ver PÃ¡gina de Error",-1))])]),(0,n.Lk)("div",O,[(0,n.bF)(c,{color:"negative",icon:"logout",label:"Cerrar SesiÃ³n",onClick:o.logout,outline:"",rounded:"",size:"md"},null,8,["onClick"])])]),(0,n.Lk)("div",Q,[a[17]||(a[17]=(0,n.Lk)("div",{class:"card-title"},[(0,n.Lk)("h3",null,"InformaciÃ³n del Sistema")],-1)),(0,n.Lk)("div",j,[(0,n.Lk)("div",G,[a[13]||(a[13]=(0,n.Lk)("span",{class:"detail-label"},"Estado del Backend",-1)),(0,n.Lk)("div",H,[(0,n.bF)(d,{color:o.backendStatus.connected?"positive":"negative","text-color":"white",icon:o.backendStatus.connected?"check":"close",size:"sm"},{default:(0,n.k6)((()=>[(0,n.eW)((0,I.v_)(o.backendStatus.connected?"Conectado":"Desconectado"),1)])),_:1},8,["color","icon"])])]),(0,n.Lk)("div",J,[a[14]||(a[14]=(0,n.Lk)("span",{class:"detail-label"},"URL del Backend",-1)),(0,n.Lk)("span",Z,(0,I.v_)(o.backendStatus.url),1)]),(0,n.Lk)("div",Y,[a[15]||(a[15]=(0,n.Lk)("span",{class:"detail-label"},"Fecha de Acceso",-1)),(0,n.Lk)("span",ee,(0,I.v_)((new Date).toLocaleString("es-ES")),1)]),(0,n.Lk)("div",ae,[a[16]||(a[16]=(0,n.Lk)("span",{class:"detail-label"},"Token JWT",-1)),(0,n.Lk)("div",te,[(0,n.bF)(d,{color:"info","text-color":"white",size:"sm"},{default:(0,n.k6)((()=>[(0,n.eW)((0,I.v_)(o.tokenInfo),1)])),_:1})])])])])])])}var ne={name:"Ok_TestView",components:{ThemeToggle:S.A},setup(){const e=(0,m.rd)(),a=(0,C.dj)(),{isDarkMode:t}=(0,E.D)(),o=(0,_.KR)({}),l=(0,_.Kh)({connected:!1,lastCheck:null,url:"Detectando...",port:null}),s=(0,n.EW)((()=>{const e=localStorage.getItem("signance_token");return e?`${e.substring(0,20)}...`:"No disponible"})),r=(0,_.KR)([{name:"AutenticaciÃ³n",description:"Verificar ruta protegida",status:"pending",test:()=>w.R2.testProtected()},{name:"GestiÃ³n de Media",description:"Listar archivos multimedia",status:"pending",test:()=>w.DX.list(0,5)},{name:"InformaciÃ³n de Negocio",description:"Obtener configuraciÃ³n empresarial",status:"pending",test:()=>w.ZK.get()},{name:"ProgramaciÃ³n",description:"Listar horarios programados",status:"pending",test:()=>w.gr.list(0,5)}]),c=async e=>{e.status="testing";try{const t=await e.test();e.status="success",e.result=t.data,a.success(`âœ… ${e.name}: Prueba exitosa`)}catch(t){e.status="error",e.error=t.message,a.error(`âŒ ${e.name}: ${t.message}`)}},d=async()=>{for(const e of r.value)await c(e),await new Promise((e=>setTimeout(e,500)))},u=async()=>{try{const e=await w.R2.getCurrentUser();o.value=e.data}catch(e){console.error("Error obteniendo informaciÃ³n del usuario:",e),a.error("Error obteniendo informaciÃ³n del usuario")}},p=async()=>{try{console.log("ðŸ” Verificando estado del backend...");const e=i["default"].getCachedBackend();if(e){console.log("ðŸ“¦ Usando informaciÃ³n cached del backend:",e),l.url=e.baseUrl,l.port=e.port;const a=await i["default"].testPort(e.port);if(l.connected=a,l.lastCheck=new Date,a)return void console.log("âœ… Backend confirmado desde cachÃ©");console.log("âŒ Backend cached no responde, detectando nuevamente...")}const a=await i["default"].detectBackend();l.connected=!0,l.url=a.baseUrl,l.port=a.port,l.lastCheck=new Date,console.log("âœ… Backend detectado exitosamente:",a)}catch(e){console.error("âŒ Error detectando backend:",e),l.connected=!1,l.url="No disponible",l.port=null,l.lastCheck=new Date}},g=()=>{e.push("/admin")},v=()=>{e.push("/media")},h=()=>{e.push("/config")},f=()=>{e.push("/error")},k=async()=>{try{await w.R2.logout()}catch(t){console.error("Error en logout:",t)}finally{localStorage.removeItem("signance_token"),a.success("SesiÃ³n cerrada exitosamente"),e.push("/login")}};return(0,n.sV)((()=>{u(),p(),setTimeout(d,2e3)})),{userInfo:o,backendStatus:l,tokenInfo:s,systemTests:r,runTest:c,runAllTests:d,goToDashboard:g,goToMediaManager:v,goToConfig:h,goToErrorPage:f,logout:k,isDarkMode:t}}};const le=(0,c.A)(ne,[["render",oe],["__scopeId","data-v-0aaf4706"]]);var se=le;const ie={class:"error-container"},re={class:"signance-container"},ce={class:"error-header"},de={class:"error-icon"},ue={class:"info-card error-info"},me={class:"card-header"},pe={class:"error-details"},ge={class:"error-badge"},ve={class:"detail-item"},he={class:"detail-value"},fe={class:"detail-item"},ke={class:"detail-value"},ye={class:"detail-item"},be={class:"detail-value"},Le={class:"info-card diagnostic-card"},_e={class:"diagnostic-grid"},Fe={class:"diagnostic-icon"},Ce={class:"diagnostic-info"},we={key:0,class:"diagnostic-details"},Ee={class:"diagnostic-action"},Se={class:"info-card solutions-card"},Pe={class:"solutions-timeline"},xe={class:"solution-step"},Me={class:"step-content"},Ie={class:"solution-step"},Ae={class:"step-content"},De={class:"solution-step"},$e={class:"step-content"},qe={class:"solution-step"},Te={class:"step-content"},ze={class:"info-card navigation-card"},Ue={class:"navigation-actions"},Re={class:"technical-section"},Be={class:"technical-content"},Ve={class:"technical-info"};function Ne(e,a,t,o,l,s){const i=(0,n.g2)("ThemeToggle"),r=(0,n.g2)("q-icon"),c=(0,n.g2)("q-chip"),d=(0,n.g2)("q-btn"),u=(0,n.g2)("q-expansion-item");return(0,n.uX)(),(0,n.CE)("div",ie,[(0,n.bF)(i,{class:"theme-toggle"}),(0,n.Lk)("div",re,[(0,n.Lk)("div",ce,[(0,n.Lk)("div",de,[(0,n.bF)(r,{name:"error",size:"5rem"})]),a[3]||(a[3]=(0,n.Lk)("h2",null,"Â¡Oops! Algo saliÃ³ mal",-1)),a[4]||(a[4]=(0,n.Lk)("p",null,"Pochtecayotl Signance System - PÃ¡gina de Error",-1))]),(0,n.Lk)("div",ue,[(0,n.Lk)("div",me,[(0,n.bF)(r,{name:"bug_report",size:"2rem"}),a[5]||(a[5]=(0,n.Lk)("div",{class:"header-text"},[(0,n.Lk)("h3",null,"Error del Sistema"),(0,n.Lk)("p",null,"Detalles tÃ©cnicos del problema")],-1))]),(0,n.Lk)("div",pe,[(0,n.Lk)("div",ge,[(0,n.bF)(c,{color:"negative","text-color":"white",icon:"error"},{default:(0,n.k6)((()=>[(0,n.eW)(" CÃ³digo: "+(0,I.v_)(o.errorCode),1)])),_:1})]),(0,n.Lk)("div",ve,[a[6]||(a[6]=(0,n.Lk)("span",{class:"detail-label"},"Mensaje:",-1)),(0,n.Lk)("span",he,(0,I.v_)(o.errorMessage),1)]),(0,n.Lk)("div",fe,[a[7]||(a[7]=(0,n.Lk)("span",{class:"detail-label"},"Timestamp:",-1)),(0,n.Lk)("span",ke,(0,I.v_)((new Date).toLocaleString("es-ES")),1)]),(0,n.Lk)("div",ye,[a[8]||(a[8]=(0,n.Lk)("span",{class:"detail-label"},"URL:",-1)),(0,n.Lk)("span",be,(0,I.v_)(o.currentUrl),1)])])]),(0,n.Lk)("div",Le,[a[9]||(a[9]=(0,n.Lk)("div",{class:"card-title"},[(0,n.Lk)("h3",null,"DiagnÃ³stico del Sistema")],-1)),(0,n.Lk)("div",_e,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.diagnosticChecks,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.name,class:(0,I.C4)(["diagnostic-item",{"diagnostic-ok":"ok"===e.status,"diagnostic-error":"error"===e.status,"diagnostic-checking":e.checking}])},[(0,n.Lk)("div",Fe,[(0,n.bF)(r,{name:"ok"===e.status?"check_circle":"error"===e.status?"error":"help",size:"1.5rem"},null,8,["name"])]),(0,n.Lk)("div",Ce,[(0,n.Lk)("h4",null,(0,I.v_)(e.name),1),(0,n.Lk)("p",null,(0,I.v_)(e.description),1),e.details?((0,n.uX)(),(0,n.CE)("p",we,(0,I.v_)(e.details),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Ee,[(0,n.bF)(d,{flat:"",round:"",icon:"refresh",onClick:a=>o.runDiagnostic(e),loading:e.checking,size:"sm",color:"primary"},null,8,["onClick","loading"])])],2)))),128))])]),(0,n.Lk)("div",Se,[a[22]||(a[22]=(0,n.Lk)("div",{class:"card-title"},[(0,n.Lk)("h3",null,"Posibles Soluciones")],-1)),(0,n.Lk)("div",Pe,[(0,n.Lk)("div",xe,[a[12]||(a[12]=(0,n.Lk)("div",{class:"step-number"},"1",-1)),(0,n.Lk)("div",Me,[a[10]||(a[10]=(0,n.Lk)("h4",null,"Verificar ConexiÃ³n",-1)),a[11]||(a[11]=(0,n.Lk)("p",null,[(0,n.eW)("Verifica que el servidor backend estÃ© ejecutÃ¡ndose en "),(0,n.Lk)("code",null,"http://127.0.0.1:8002")],-1)),(0,n.bF)(d,{flat:"",color:"primary",label:"Probar ConexiÃ³n",onClick:o.testConnection,size:"sm",icon:"wifi",rounded:""},null,8,["onClick"])])]),(0,n.Lk)("div",Ie,[a[15]||(a[15]=(0,n.Lk)("div",{class:"step-number"},"2",-1)),(0,n.Lk)("div",Ae,[a[13]||(a[13]=(0,n.Lk)("h4",null,"Revisar AutenticaciÃ³n",-1)),a[14]||(a[14]=(0,n.Lk)("p",null,"Verifica que tu sesiÃ³n no haya expirado",-1)),(0,n.bF)(d,{flat:"",color:"primary",label:"Ir a Login",onClick:o.goToLogin,size:"sm",icon:"key",rounded:""},null,8,["onClick"])])]),(0,n.Lk)("div",De,[a[18]||(a[18]=(0,n.Lk)("div",{class:"step-number"},"3",-1)),(0,n.Lk)("div",$e,[a[16]||(a[16]=(0,n.Lk)("h4",null,"Recargar PÃ¡gina",-1)),a[17]||(a[17]=(0,n.Lk)("p",null,"A veces un simple recargo puede solucionar el problema",-1)),(0,n.bF)(d,{flat:"",color:"primary",label:"Recargar",onClick:o.reloadPage,size:"sm",icon:"refresh",rounded:""},null,8,["onClick"])])]),(0,n.Lk)("div",qe,[a[21]||(a[21]=(0,n.Lk)("div",{class:"step-number"},"4",-1)),(0,n.Lk)("div",Te,[a[19]||(a[19]=(0,n.Lk)("h4",null,"Contactar Soporte",-1)),a[20]||(a[20]=(0,n.Lk)("p",null,"Si el problema persiste, contacta al equipo de soporte",-1)),(0,n.bF)(d,{flat:"",color:"primary",label:"Reportar Error",onClick:o.reportError,size:"sm",icon:"support",rounded:""},null,8,["onClick"])])])])]),(0,n.Lk)("div",ze,[a[26]||(a[26]=(0,n.Lk)("div",{class:"card-title"},[(0,n.Lk)("h3",null,"NavegaciÃ³n")],-1)),(0,n.Lk)("div",Ue,[(0,n.Lk)("div",{class:"nav-button primary-nav",onClick:a[0]||(a[0]=(...e)=>o.goToHome&&o.goToHome(...e))},[(0,n.bF)(r,{name:"home",size:"2rem"}),a[23]||(a[23]=(0,n.Lk)("span",null,"Ir al Inicio",-1))]),(0,n.Lk)("div",{class:"nav-button secondary-nav",onClick:a[1]||(a[1]=(...e)=>o.goToLogin&&o.goToLogin(...e))},[(0,n.bF)(r,{name:"login",size:"2rem"}),a[24]||(a[24]=(0,n.Lk)("span",null,"Iniciar SesiÃ³n",-1))]),(0,n.Lk)("div",{class:"nav-button success-nav",onClick:a[2]||(a[2]=(...e)=>o.goToTestPage&&o.goToTestPage(...e))},[(0,n.bF)(r,{name:"check",size:"2rem"}),a[25]||(a[25]=(0,n.Lk)("span",null,"PÃ¡gina de Prueba",-1))])])]),(0,n.Lk)("div",Re,[(0,n.bF)(u,{icon:"code",label:"InformaciÃ³n TÃ©cnica",caption:"Detalles para desarrolladores",class:"technical-expansion"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",Be,[(0,n.Lk)("pre",Ve,(0,I.v_)(o.technicalInfo),1)])])),_:1})])])])}var Xe={name:"Error_View",components:{ThemeToggle:S.A},setup(){const e=(0,m.rd)(),a=(0,m.lq)(),t=(0,F.Jud)(),o=(0,C.dj)(),{isDarkMode:l}=(0,E.D)(),s=(0,_.KR)(a.query.code||"500"),i=(0,_.KR)(a.query.message||"Error interno del sistema"),r=(0,_.KR)(window.location.href),c=(0,_.KR)([{name:"ConexiÃ³n Backend",description:"Verificar si el servidor estÃ¡ disponible",status:"unknown",checking:!1,test:async()=>{const e=await fetch("http://127.0.0.1:8002/health");return e.ok}},{name:"Token de AutenticaciÃ³n",description:"Verificar validez del token JWT",status:"unknown",checking:!1,test:()=>{const e=localStorage.getItem("signance_token");return!!e}},{name:"Almacenamiento Local",description:"Verificar disponibilidad de localStorage",status:"unknown",checking:!1,test:()=>{try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch{return!1}}},{name:"Conectividad de Red",description:"Verificar conexiÃ³n a internet",status:"unknown",checking:!1,test:()=>navigator.onLine}]),d=(0,n.EW)((()=>JSON.stringify({errorCode:s.value,errorMessage:i.value,url:r.value,userAgent:navigator.userAgent,timestamp:(new Date).toISOString(),localStorage:{hasToken:!!localStorage.getItem("signance_token"),tokenLength:localStorage.getItem("signance_token")?.length||0},route:{path:a.path,query:a.query,params:a.params}},null,2))),u=async e=>{e.checking=!0;try{const a=await e.test();e.status=a?"ok":"error",e.details=a?"Funcionando correctamente":"Problema detectado"}catch(a){e.status="error",e.details=`Error: ${a.message}`}finally{e.checking=!1}},p=async()=>{for(const e of c.value)await u(e),await new Promise((e=>setTimeout(e,300)))},g=async()=>{t.loading.show({message:"Probando conexiÃ³n..."});try{const e=await fetch("http://127.0.0.1:8002/health");e.ok?o.success("âœ… ConexiÃ³n exitosa con el backend"):o.warning("âš ï¸ El servidor responde pero con errores")}catch(e){o.error("âŒ No se puede conectar con el servidor")}finally{t.loading.hide()}},v=()=>{e.push("/")},h=()=>{e.push("/login")},f=()=>{e.push("/test-ok")},k=()=>{window.location.reload()},y=()=>{o.info("FunciÃ³n de reporte de errores en desarrollo"),console.log("Error Report:",d.value)};return(0,n.sV)((()=>{setTimeout(p,1e3)})),{errorCode:s,errorMessage:i,currentUrl:r,diagnosticChecks:c,technicalInfo:d,runDiagnostic:u,runAllDiagnostics:p,testConnection:g,goToHome:v,goToLogin:h,goToTestPage:f,reloadPage:k,reportError:y,isDarkMode:l}}};const We=(0,c.A)(Xe,[["render",Ne],["__scopeId","data-v-2aecc947"]]);var Ke=We;const Oe={class:"selection-container"},Qe={class:"selection-card"},je={class:"card-header"},Ge={class:"logo-section"},He={class:"options-section"},Je={class:"option-icon"},Ze={class:"option-icon"};function Ye(e,a,t,o,l,s){const i=(0,n.g2)("ThemeToggle"),r=(0,n.g2)("q-icon");return(0,n.uX)(),(0,n.CE)("div",Oe,[(0,n.bF)(i,{class:"theme-toggle"}),(0,n.Lk)("div",Qe,[(0,n.Lk)("div",je,[(0,n.Lk)("div",Ge,[(0,n.bF)(r,{name:"campaign",size:"4rem",class:"ads-icon"}),a[2]||(a[2]=(0,n.Lk)("h2",{class:"welcome-title"},"Bienvenido",-1)),a[3]||(a[3]=(0,n.Lk)("h3",{class:"system-title"},"Pochtecayotl Signance System",-1))]),a[4]||(a[4]=(0,n.Lk)("p",{class:"subtitle"},"Seleccione una opciÃ³n para continuar",-1))]),(0,n.Lk)("div",He,[(0,n.Lk)("div",{class:"option-card player-option",onClick:a[0]||(a[0]=(...e)=>o.goPlayer&&o.goPlayer(...e))},[(0,n.Lk)("div",Je,[(0,n.bF)(r,{name:"play_circle_filled",size:"3rem"})]),a[5]||(a[5]=(0,n.Lk)("div",{class:"option-content"},[(0,n.Lk)("h4",null,"Reproductor"),(0,n.Lk)("p",null,"Acceder al reproductor de contenido multimedia")],-1)),(0,n.bF)(r,{name:"arrow_forward",size:"1.5rem",class:"arrow-icon"})]),(0,n.Lk)("div",{class:"option-card admin-option",onClick:a[1]||(a[1]=(...e)=>o.goAdmin&&o.goAdmin(...e))},[(0,n.Lk)("div",Ze,[(0,n.bF)(r,{name:"dashboard",size:"3rem"})]),a[6]||(a[6]=(0,n.Lk)("div",{class:"option-content"},[(0,n.Lk)("h4",null,"Admin Dashboard"),(0,n.Lk)("p",null,"Gestionar contenido y configuraciÃ³n del sistema")],-1)),(0,n.bF)(r,{name:"arrow_forward",size:"1.5rem",class:"arrow-icon"})])]),a[7]||(a[7]=(0,n.Lk)("div",{class:"footer-section"},[(0,n.Lk)("p",{class:"footer-text"},"Sistema diseÃ±ado por un gei ðŸ³ï¸â€ðŸŒˆ")],-1))])])}var ea={name:"SelectionView",components:{ThemeToggle:S.A},setup(){const e=(0,m.rd)(),{isDarkMode:a}=(0,E.D)(),t=()=>e.push("/player"),o=()=>e.push("/admin");return{goPlayer:t,goAdmin:o,isDarkMode:a}}};const aa=(0,c.A)(ea,[["render",Ye],["__scopeId","data-v-8e67c9e0"]]);var ta=aa,oa=t(557),na=t(600);const la={class:"admin-dashboard-container"},sa={class:"signance-container"},ia={class:"dashboard-header"},ra={class:"header-icon"},ca={class:"info-card upload-card"},da={class:"card-header"},ua={class:"upload-content"},ma={class:"text-h6"},pa={class:"row q-gutter-md"},ga={class:"col-5"},va={class:"col-6"},ha={class:"duration-display"},fa=["onDblclick"],ka={key:1,class:"duration-readonly"};function ya(e,a,t,l,s,i){const r=(0,n.g2)("ThemeToggle"),c=(0,n.g2)("q-icon"),d=(0,n.g2)("StatisticsCard"),u=(0,n.g2)("PlaylistManagement"),m=(0,n.g2)("MediaUploader"),p=(0,n.g2)("MediaGallery"),g=(0,n.g2)("QuickActions"),v=(0,n.g2)("PlaylistDialog"),h=(0,n.g2)("EditMediaDialog"),f=(0,n.g2)("ScheduleDialog"),k=(0,n.g2)("q-card-section"),y=(0,n.g2)("q-item-section"),b=(0,n.g2)("q-item-label"),L=(0,n.g2)("q-btn"),_=(0,n.g2)("q-item"),F=(0,n.g2)("q-list"),C=(0,n.g2)("q-input"),w=(0,n.g2)("draggable"),E=(0,n.g2)("q-card-actions"),S=(0,n.g2)("q-card"),P=(0,n.g2)("q-dialog");return(0,n.uX)(),(0,n.CE)("div",la,[(0,n.bF)(r,{class:"theme-toggle"}),(0,n.Lk)("div",sa,[(0,n.Lk)("div",ia,[(0,n.Lk)("div",ra,[(0,n.bF)(c,{name:"dashboard",size:"4rem"})]),a[5]||(a[5]=(0,n.Lk)("h2",null,"Dashboard Administrativo",-1)),a[6]||(a[6]=(0,n.Lk)("p",null,"Pochtecayotl Signance System - Panel de Control",-1))]),(0,n.bF)(d,{stats:l.stats,"business-info":l.businessInfo},null,8,["stats","business-info"]),(0,n.bF)(u,{playlists:l.playlists,onCreate:l.showCreatePlaylistDialog,onEdit:l.editPlaylist,onManage:l.managePlaylistMedia,onSchedule:l.schedulePlaylist,onDelete:l.deletePlaylist},null,8,["playlists","onCreate","onEdit","onManage","onSchedule","onDelete"]),(0,n.Lk)("div",ca,[(0,n.Lk)("div",da,[(0,n.bF)(c,{name:"cloud_upload",size:"2rem"}),a[7]||(a[7]=(0,n.Lk)("div",{class:"header-text"},[(0,n.Lk)("h3",null,"Subir Multimedia"),(0,n.Lk)("p",null,"Agregar nuevos archivos al sistema")],-1))]),(0,n.Lk)("div",ua,[(0,n.bF)(m,{onUploaded:l.onMediaUploaded,onError:l.onMediaUploadError},null,8,["onUploaded","onError"])])]),(0,n.bF)(p,{"media-files":l.mediaFiles,"backend-base-url":l.backendBaseUrl,loading:l.mediaLoading,mode:"compact",title:"Archivos Multimedia",subtitle:"Archivos recientes","max-items":8,onRefresh:l.loadMedia,onEdit:l.editMedia,onDelete:l.deleteMedia,onShowAll:e.navigateToMediaManager,class:"section-spacing"},null,8,["media-files","backend-base-url","loading","onRefresh","onEdit","onDelete","onShowAll"]),(0,n.bF)(g,{onLogout:l.logout,class:"section-spacing"},null,8,["onLogout"])]),(0,n.bF)(v,{modelValue:l.playlistDialog,"onUpdate:modelValue":a[0]||(a[0]=e=>l.playlistDialog=e),playlist:l.editingPlaylist,form:l.playlistForm,loading:l.savingPlaylist,"is-dark":l.isDarkMode,onSave:l.savePlaylist,onClose:l.closePlaylistDialog},null,8,["modelValue","playlist","form","loading","is-dark","onSave","onClose"]),(0,n.bF)(h,{modelValue:l.editMediaDialog,"onUpdate:modelValue":a[1]||(a[1]=e=>l.editMediaDialog=e),media:l.editingMedia,form:l.editMediaForm,loading:l.savingMedia,"is-dark":l.isDarkMode,onSave:l.saveMediaChanges,onClose:l.closeEditMediaDialog},null,8,["modelValue","media","form","loading","is-dark","onSave","onClose"]),(0,n.bF)(f,{modelValue:l.scheduleDialog,"onUpdate:modelValue":a[2]||(a[2]=e=>l.scheduleDialog=e),form:l.scheduleForm,loading:l.savingSchedule,"weekday-options":l.weekdayOptions,"is-dark":l.isDarkMode,onSave:l.saveSchedule,onClose:l.closeScheduleDialog},null,8,["modelValue","form","loading","weekday-options","is-dark","onSave","onClose"]),(0,n.bF)(P,{modelValue:l.playlistMediaDialog,"onUpdate:modelValue":a[4]||(a[4]=e=>l.playlistMediaDialog=e),persistent:""},{default:(0,n.k6)((()=>[(0,n.bF)(S,{style:{"min-width":"700px","max-width":"900px"},class:(0,I.C4)({"bg-dark text-white":l.isDarkMode})},{default:(0,n.k6)((()=>[(0,n.bF)(k,null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",ma," Gestionar Medios - "+(0,I.v_)(l.selectedPlaylist?.name),1)])),_:1}),(0,n.bF)(k,{class:"q-pt-none"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",pa,[(0,n.Lk)("div",ga,[a[9]||(a[9]=(0,n.Lk)("div",{class:"text-subtitle2 q-mb-md"},"Medios Disponibles",-1)),(0,n.bF)(F,{bordered:"",class:(0,I.C4)(["available-media-list",{"bg-grey-9":l.isDarkMode}])},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.availableMedia,(e=>((0,n.uX)(),(0,n.Wv)(_,{key:e.id,clickable:"",onClick:a=>l.addMediaToPlaylist(e)},{default:(0,n.k6)((()=>[(0,n.bF)(y,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(c,{name:l.getMediaIcon(e.media_type||e.file_type)},null,8,["name"])])),_:2},1024),(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(b,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,I.v_)(e.filename),1)])),_:2},1024),(0,n.bF)(b,{caption:""},{default:(0,n.k6)((()=>[(0,n.eW)((0,I.v_)(e.media_type||e.file_type),1)])),_:2},1024)])),_:2},1024),(0,n.bF)(y,{side:""},{default:(0,n.k6)((()=>[(0,n.bF)(L,{flat:"",round:"",icon:"add",size:"sm"})])),_:1})])),_:2},1032,["onClick"])))),128)),0===l.availableMedia.length?((0,n.uX)(),(0,n.Wv)(_,{key:0},{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(b,{class:"text-center text-grey"},{default:(0,n.k6)((()=>a[8]||(a[8]=[(0,n.eW)("No hay medios disponibles")]))),_:1,__:[8]})])),_:1})])),_:1})):(0,n.Q3)("",!0)])),_:1},8,["class"])]),(0,n.Lk)("div",va,[a[12]||(a[12]=(0,n.Lk)("div",{class:"text-subtitle2 q-mb-md"},"Medios en Playlist",-1)),(0,n.bF)(F,{bordered:"",class:(0,I.C4)(["playlist-media-list",{"bg-grey-9":l.isDarkMode}])},{default:(0,n.k6)((()=>[(0,n.bF)(w,{modelValue:l.playlistMedias,"onUpdate:modelValue":a[3]||(a[3]=e=>l.playlistMedias=e),onEnd:l.reorderPlaylistMedia,"item-key":"id"},{item:(0,n.k6)((({element:e,index:t})=>[(0,n.bF)(_,null,{default:(0,n.k6)((()=>[(0,n.bF)(y,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(c,{name:"drag_handle"})])),_:1}),(0,n.bF)(y,{avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(c,{name:l.getMediaIcon(e.media_type||e.file_type)},null,8,["name"])])),_:2},1024),(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(b,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,I.v_)(e.filename),1)])),_:2},1024),(0,n.bF)(b,{caption:""},{default:(0,n.k6)((()=>[(0,n.eW)((0,I.v_)(e.media_type||e.file_type)+" - Orden: "+(0,I.v_)(t+1)+" ",1),(0,n.Lk)("span",ha,[a[10]||(a[10]=(0,n.eW)(" - DuraciÃ³n: ")),e.editingDuration||"video"===(e.media_type||e.file_type)?"video"===(e.media_type||e.file_type)?((0,n.uX)(),(0,n.CE)("span",ka,(0,I.v_)(e.duration||0)+"s ",1)):((0,n.uX)(),(0,n.Wv)(C,{key:2,modelValue:e.tempDuration,"onUpdate:modelValue":a=>e.tempDuration=a,modelModifiers:{number:!0},type:"number",min:"1",max:"3600",dense:"",outlined:"",suffix:"s",class:"duration-input",style:{width:"80px",display:"inline-block"},onBlur:a=>l.saveDuration(e),onKeyup:[(0,o.jR)((a=>l.saveDuration(e)),["enter"]),(0,o.jR)((a=>l.cancelEditDuration(e)),["escape"])],autofocus:""},null,8,["modelValue","onUpdate:modelValue","onBlur","onKeyup"])):((0,n.uX)(),(0,n.CE)("span",{key:0,onDblclick:a=>l.startEditDuration(e),class:"duration-value cursor-pointer text-primary",title:"Doble clic para editar duraciÃ³n"},(0,I.v_)(e.duration||0)+"s ",41,fa))])])),_:2},1024)])),_:2},1024),(0,n.bF)(y,{side:""},{default:(0,n.k6)((()=>[(0,n.bF)(L,{flat:"",round:"",icon:"remove",size:"sm",onClick:a=>l.removeMediaFromPlaylist(e.id)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:1},8,["modelValue","onEnd"]),0===l.playlistMedias.length?((0,n.uX)(),(0,n.Wv)(_,{key:0},{default:(0,n.k6)((()=>[(0,n.bF)(y,null,{default:(0,n.k6)((()=>[(0,n.bF)(b,{class:"text-center text-grey"},{default:(0,n.k6)((()=>a[11]||(a[11]=[(0,n.eW)("No hay medios en esta playlist")]))),_:1,__:[11]})])),_:1})])),_:1})):(0,n.Q3)("",!0)])),_:1},8,["class"])])])])),_:1}),(0,n.bF)(E,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bF)(L,{flat:"",label:"Cerrar",onClick:l.closePlaylistMediaDialog},null,8,["onClick"])])),_:1})])),_:1},8,["class"])])),_:1},8,["modelValue"])])}var ba=t(661);const La={class:"info-card stats-card"},_a={class:"stats-grid"},Fa={class:"stat-item media-stat"},Ca={class:"stat-icon"},wa={class:"stat-info"},Ea={class:"stat-item playlist-stat"},Sa={class:"stat-icon"},Pa={class:"stat-info"},xa={class:"stat-item schedule-stat"},Ma={class:"stat-icon"},Ia={class:"stat-info"},Aa={class:"stat-item business-stat"},Da={class:"stat-icon"},$a={class:"stat-info"};var qa={__name:"StatisticsCard",props:{stats:Object,businessInfo:Object},setup(e){return(a,t)=>{const o=(0,n.g2)("q-icon");return(0,n.uX)(),(0,n.CE)("div",La,[t[4]||(t[4]=(0,n.Lk)("div",{class:"card-title"},[(0,n.Lk)("h3",null,"EstadÃ­sticas del Sistema")],-1)),(0,n.Lk)("div",_a,[(0,n.Lk)("div",Fa,[(0,n.Lk)("div",Ca,[(0,n.bF)(o,{name:"video_library",size:"2rem"})]),(0,n.Lk)("div",wa,[(0,n.Lk)("h4",null,(0,I.v_)(e.stats.totalMedia),1),t[0]||(t[0]=(0,n.Lk)("p",null,"Archivos Multimedia",-1))])]),(0,n.Lk)("div",Ea,[(0,n.Lk)("div",Sa,[(0,n.bF)(o,{name:"playlist_play",size:"2rem"})]),(0,n.Lk)("div",Pa,[(0,n.Lk)("h4",null,(0,I.v_)(e.stats.totalPlaylists),1),t[1]||(t[1]=(0,n.Lk)("p",null,"Playlists Creadas",-1))])]),(0,n.Lk)("div",xa,[(0,n.Lk)("div",Ma,[(0,n.bF)(o,{name:"schedule",size:"2rem"})]),(0,n.Lk)("div",Ia,[(0,n.Lk)("h4",null,(0,I.v_)(e.stats.totalScheduledItems),1),t[2]||(t[2]=(0,n.Lk)("p",null,"Elementos Programados",-1))])]),(0,n.Lk)("div",Aa,[(0,n.Lk)("div",Da,[(0,n.bF)(o,{name:"business",size:"2rem"})]),(0,n.Lk)("div",$a,[(0,n.Lk)("h4",null,(0,I.v_)(e.businessInfo.name||"N/A"),1),t[3]||(t[3]=(0,n.Lk)("p",null,"Negocio Configurado",-1))])])])])}}};const Ta=(0,c.A)(qa,[["__scopeId","data-v-ed43a590"]]);var za=Ta;const Ua={class:"info-card playlists-card"},Ra={class:"card-header"},Ba={class:"playlists-content"},Va={key:0,class:"empty-state"},Na={key:1,class:"playlists-grid"},Xa={class:"playlist-icon"},Wa={class:"playlist-info"},Ka={class:"playlist-meta"},Oa={class:"playlist-date"},Qa={class:"playlist-actions"};var ja={__name:"PlaylistManagement",props:{playlists:Array},setup(e){const a=e=>e?new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"Fecha no disponible";return(t,o)=>{const l=(0,n.g2)("q-icon"),s=(0,n.g2)("q-btn"),i=(0,n.g2)("q-chip");return(0,n.uX)(),(0,n.CE)("div",Ua,[(0,n.Lk)("div",Ra,[(0,n.bF)(l,{name:"playlist_play",size:"2rem"}),o[2]||(o[2]=(0,n.Lk)("div",{class:"header-text"},[(0,n.Lk)("h3",null,"GestiÃ³n de Playlists"),(0,n.Lk)("p",null,"Crear y administrar listas de reproducciÃ³n")],-1)),(0,n.bF)(s,{color:"primary",icon:"add",label:"Nueva Playlist",onClick:o[0]||(o[0]=e=>t.$emit("create")),rounded:"","no-caps":""})]),(0,n.Lk)("div",Ba,[0===e.playlists.length?((0,n.uX)(),(0,n.CE)("div",Va,[(0,n.bF)(l,{name:"playlist_add",size:"3rem"}),o[3]||(o[3]=(0,n.Lk)("p",null,"No hay playlists creadas",-1)),(0,n.bF)(s,{flat:"",color:"primary",label:"Crear primera playlist",onClick:o[1]||(o[1]=e=>t.$emit("create"))})])):((0,n.uX)(),(0,n.CE)("div",Na,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.playlists,(e=>((0,n.uX)(),(0,n.CE)("div",{key:e.id,class:"playlist-item"},[(0,n.Lk)("div",Xa,[(0,n.bF)(l,{name:"queue_music",size:"1.5rem"})]),(0,n.Lk)("div",Wa,[(0,n.Lk)("h4",null,(0,I.v_)(e.name),1),(0,n.Lk)("p",null,(0,I.v_)(e.description||"Sin descripciÃ³n"),1),(0,n.Lk)("div",Ka,[(0,n.bF)(i,{size:"sm",color:"primary","text-color":"white"},{default:(0,n.k6)((()=>[(0,n.eW)((0,I.v_)(e.media_count||0)+" medios ",1)])),_:2},1024),(0,n.Lk)("span",Oa,(0,I.v_)(a(e.created_at)),1)])]),(0,n.Lk)("div",Qa,[(0,n.bF)(s,{flat:"",round:"",icon:"video_library",size:"sm",color:"secondary",title:"Gestionar medios",onClick:a=>t.$emit("manage",e)},null,8,["onClick"]),(0,n.bF)(s,{flat:"",round:"",icon:"schedule",size:"sm",color:"orange",title:"Programar playlist",onClick:a=>t.$emit("schedule",e)},null,8,["onClick"]),(0,n.bF)(s,{flat:"",round:"",icon:"edit",size:"sm",color:"primary",title:"Editar",onClick:a=>t.$emit("edit",e)},null,8,["onClick"]),(0,n.bF)(s,{flat:"",round:"",icon:"delete",size:"sm",color:"negative",title:"Eliminar",onClick:a=>t.$emit("delete",e.id)},null,8,["onClick"])])])))),128))]))])])}}};const Ga=(0,c.A)(ja,[["__scopeId","data-v-56cea820"]]);var Ha=Ga,Ja=t(503);const Za={class:"info-card actions-card"},Ya={class:"actions-grid"};var et={__name:"QuickActions",emits:["logout"],setup(e){const a=(0,m.rd)(),t=()=>{a.push("/media")},o=()=>{a.push("/test-ok")};return(e,l)=>{const s=(0,n.g2)("q-icon");return(0,n.uX)(),(0,n.CE)("div",Za,[l[8]||(l[8]=(0,n.Lk)("div",{class:"card-title"},[(0,n.Lk)("h3",null,"Acciones RÃ¡pidas")],-1)),(0,n.Lk)("div",Ya,[(0,n.Lk)("div",{class:"action-button primary-action",onClick:l[0]||(l[0]=e=>(0,_.R1)(a).push("/config"))},[(0,n.bF)(s,{name:"settings",size:"2rem"}),l[3]||(l[3]=(0,n.Lk)("span",null,"ConfiguraciÃ³n del Negocio",-1))]),(0,n.Lk)("div",{class:"action-button secondary-action",onClick:l[1]||(l[1]=e=>(0,_.R1)(a).push("/player"))},[(0,n.bF)(s,{name:"play_circle",size:"2rem"}),l[4]||(l[4]=(0,n.Lk)("span",null,"Reproductor",-1))]),(0,n.Lk)("div",{class:"action-button accent-action",onClick:t},[(0,n.bF)(s,{name:"folder",size:"2rem"}),l[5]||(l[5]=(0,n.Lk)("span",null,"Explorar Media",-1))]),(0,n.Lk)("div",{class:"action-button info-action",onClick:o},[(0,n.bF)(s,{name:"support_agent",size:"2rem"}),l[6]||(l[6]=(0,n.Lk)("span",null,"Asistencia",-1))]),(0,n.Lk)("div",{class:"action-button warning-action",onClick:l[2]||(l[2]=a=>e.$emit("logout"))},[(0,n.bF)(s,{name:"logout",size:"2rem"}),l[7]||(l[7]=(0,n.Lk)("span",null,"Cerrar SesiÃ³n",-1))])])])}}};const at=(0,c.A)(et,[["__scopeId","data-v-ac02aafe"]]);var tt=at;const ot={class:"text-h6"};var nt={__name:"PlaylistDialog",props:{modelValue:Boolean,playlist:Object,form:Object,loading:Boolean,isDark:Boolean},emits:["update:modelValue","save","close"],setup(e){return(a,t)=>{const o=(0,n.g2)("q-card-section"),l=(0,n.g2)("q-input"),s=(0,n.g2)("q-btn"),i=(0,n.g2)("q-card-actions"),r=(0,n.g2)("q-card"),c=(0,n.g2)("q-dialog");return(0,n.uX)(),(0,n.Wv)(c,{"model-value":e.modelValue,"onUpdate:modelValue":t[4]||(t[4]=e=>a.$emit("update:modelValue",e)),persistent:""},{default:(0,n.k6)((()=>[(0,n.bF)(r,{style:{"min-width":"400px"},class:(0,I.C4)({"bg-dark text-white":e.isDark})},{default:(0,n.k6)((()=>[(0,n.bF)(o,null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",ot,(0,I.v_)(e.playlist?"Editar Playlist":"Nueva Playlist"),1)])),_:1}),(0,n.bF)(o,{class:"q-pt-none"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.form.name=a),label:"Nombre de la playlist",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),(0,n.bF)(l,{modelValue:e.form.description,"onUpdate:modelValue":t[1]||(t[1]=a=>e.form.description=a),label:"DescripciÃ³n (opcional)",type:"textarea",outlined:"",rows:"3"},null,8,["modelValue"])])),_:1}),(0,n.bF)(i,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{flat:"",label:"Cancelar",onClick:t[2]||(t[2]=e=>a.$emit("close"))}),(0,n.bF)(s,{color:"primary",label:"Guardar",loading:e.loading,onClick:t[3]||(t[3]=e=>a.$emit("save"))},null,8,["loading"])])),_:1})])),_:1},8,["class"])])),_:1},8,["model-value"])}}};const lt=nt;var st=lt,it=t(714),rt={__name:"ScheduleDialog",props:{modelValue:Boolean,form:Object,loading:Boolean,isDark:Boolean,weekdayOptions:Array},emits:["update:modelValue","save","close"],setup(e){return(a,t)=>{const o=(0,n.g2)("q-card-section"),l=(0,n.g2)("q-input"),s=(0,n.g2)("q-btn"),i=(0,n.g2)("q-card-actions"),r=(0,n.g2)("q-card"),c=(0,n.g2)("q-dialog");return(0,n.uX)(),(0,n.Wv)(c,{"model-value":e.modelValue,"onUpdate:modelValue":t[3]||(t[3]=e=>a.$emit("update:modelValue",e)),persistent:""},{default:(0,n.k6)((()=>[(0,n.bF)(r,{style:{"min-width":"400px"},class:(0,I.C4)({"bg-dark text-white":e.isDark})},{default:(0,n.k6)((()=>[(0,n.bF)(o,null,{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.Lk)("div",{class:"text-h6"},"Programar Contenido",-1)]))),_:1,__:[4]}),(0,n.bF)(o,{class:"q-pt-none"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:e.form.contentName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.form.contentName=a),label:"Nombre",outlined:"",class:"q-mb-md"},null,8,["modelValue"])])),_:1}),(0,n.bF)(i,{align:"right"},{default:(0,n.k6)((()=>[(0,n.bF)(s,{flat:"",label:"Cancelar",onClick:t[1]||(t[1]=e=>a.$emit("close"))}),(0,n.bF)(s,{color:"primary",label:"Guardar",loading:e.loading,onClick:t[2]||(t[2]=e=>a.$emit("save"))},null,8,["loading"])])),_:1})])),_:1},8,["class"])])),_:1},8,["model-value"])}}};const ct=rt;var dt=ct;function ut(){const e=(0,_.KR)([]),a=(0,_.Kh)({totalPlaylists:0,totalScheduledItems:0,totalMedia:0}),t=(0,C.dj)(),o=async()=>{try{const{data:a}=await w.fP.list();e.value=a}catch(a){t.error("Error cargando playlists")}},n=async()=>{try{const[e,t]=await Promise.all([w.fP.getStats(),w.DX.list()]);a.totalPlaylists=e.data.total_playlists,a.totalScheduledItems=e.data.total_scheduled_items,a.totalMedia=t.data.length}catch(e){t.error("Error cargando estadÃ­sticas")}},l=async e=>{await w.fP.create(e),await o(),await n()},s=async(e,a)=>{await w.fP.update(e,a),await o(),await n()},i=async e=>{await w.fP.delete(e),await o(),await n()};return{playlists:e,stats:a,loadPlaylists:o,loadStats:n,createPlaylist:l,updatePlaylist:s,removePlaylist:i}}function mt(){const e=(0,_.KR)([]),a=(0,C.dj)(),t=async()=>{try{const{data:a}=await w.DX.list();e.value=a}catch(t){a.error("Error cargando medios")}},o=async e=>{await w.DX.delete(e),await t()};return{mediaFiles:e,loadMedia:t,removeMedia:o}}function pt(){const e=(0,_.KR)([]),a=(0,C.dj)(),t=async()=>{try{const{data:a}=await w.gr.list();e.value=a}catch(t){a.error("Error cargando programaciones")}},o=async e=>{await w.gr.create(e),await t()};return{schedules:e,loadSchedules:t,createSchedule:o}}var gt=t(891),vt=t(432),ht=t.n(vt),ft={name:"AdminView",components:{MediaUploader:ba.A,ThemeToggle:S.A,StatisticsCard:za,PlaylistManagement:Ha,MediaGallery:Ja.A,QuickActions:tt,PlaylistDialog:st,EditMediaDialog:it.A,ScheduleDialog:dt,draggable:ht()},setup(){const e=(0,m.rd)(),a=(0,F.Jud)(),t=(0,C.dj)(),{isDarkMode:o}=(0,E.D)(),{backendBaseUrl:l}=(0,gt.f)(),s=(0,_.KR)(!1),i=(0,_.KR)(!1),r=(0,_.KR)(!1),c=(0,_.KR)(!1),d=(0,_.Kh)({name:"",description:""}),u=(0,_.Kh)({filename:"",description:""}),p=(0,_.Kh)({contentName:""}),g=(0,_.KR)(!1),v=(0,_.KR)(!1),h=(0,_.KR)(!1),f=(0,_.KR)(!1),{playlists:k,stats:y,loadPlaylists:b,loadStats:L,createPlaylist:S,updatePlaylist:P,removePlaylist:x}=ut(),{mediaFiles:M,loadMedia:I,removeMedia:A}=mt(),{loadSchedules:D}=pt(),$=(0,_.Kh)({name:"",logo:null}),q=(0,_.KR)(null),T=(0,_.KR)(null),z=(0,_.KR)(null),U=(0,_.KR)([]),R=(0,_.KR)([]),B=[{label:"Lun",value:0},{label:"Mar",value:1},{label:"MiÃ©",value:2},{label:"Jue",value:3},{label:"Vie",value:4},{label:"SÃ¡b",value:5},{label:"Dom",value:6}],V=async()=>{await Promise.all([b(),I(),L(),D(),N()])},N=async()=>{try{const e=await w.ZK.get();Object.assign($,e.data)}catch(e){console.error("Error loading business info:",e),$.name="Signance System",$.logo=null}},X=()=>{q.value=null,d.name="",d.description="",s.value=!0},W=e=>{q.value=e,d.name=e.name,d.description=e.description||"",s.value=!0},K=async()=>{g.value=!0;try{q.value?await P(q.value.id,d):await S(d),s.value=!1}finally{g.value=!1}},O=async e=>{await x(e)},Q=()=>{I(),L()},j=()=>{t.error("Error subiendo archivo")},G=e=>{T.value=e,u.filename=e.filename,u.description=e.description,i.value=!0},H=async()=>{i.value=!1},J=async e=>{await A(e),L()},Z=e=>{p.contentName=e.name,r.value=!0},Y=async e=>{z.value=e;try{const a=await fetch(`${l.value}/api/playlists/${e.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("signance_token")}`}}),t=await a.json();R.value=t.medias||[];const o=new Set(R.value.map((e=>e.id)));U.value=M.value.filter((e=>!o.has(e.id))),c.value=!0}catch(a){t.error("Error cargando datos de playlist"),console.error("Error loading playlist media:",a)}},ee=()=>{c.value=!1,z.value=null,U.value=[],R.value=[]},ae=()=>{s.value=!1},te=()=>{i.value=!1},oe=()=>{r.value=!1},ne=async()=>{h.value=!1,r.value=!1},le=()=>{localStorage.removeItem("signance_token"),e.push("/login")},se=async e=>{try{const a=await fetch(`${l.value}/api/playlists/${z.value.id}/media`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("signance_token")}`},body:JSON.stringify({media_id:e.id})});if(!a.ok)throw new Error("Error en la respuesta del servidor");U.value=U.value.filter((a=>a.id!==e.id)),R.value.push({...e,order_index:R.value.length}),t.success(`"${e.filename}" aÃ±adido a la playlist`)}catch(a){t.error("Error aÃ±adiendo medio a la playlist"),console.error("Error adding media to playlist:",a)}},ie=async e=>{try{const a=await fetch(`${l.value}/api/playlists/${z.value.id}/media/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("signance_token")}`}});if(!a.ok)throw new Error("Error en la respuesta del servidor");{const a=R.value.find((a=>a.id===e));a&&(R.value=R.value.filter((a=>a.id!==e)),U.value.push(a),t.success(`"${a.filename}" removido de la playlist`))}}catch(a){t.error("Error removiendo medio de la playlist"),console.error("Error removing media from playlist:",a)}},re=async()=>{try{const e=R.value.map(((e,a)=>({media_id:e.id,order_index:a}))),a=await fetch(`${l.value}/api/playlists/${z.value.id}/reorder`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("signance_token")}`},body:JSON.stringify({media_order:e})});if(!a.ok)throw new Error("Error en la respuesta del servidor");t.success("Orden actualizado")}catch(e){t.error("Error reordenando medios"),console.error("Error reordering media:",e)}},ce=e=>{if(!e)return"description";const a=e.toLowerCase();return a.includes("image")?"image":a.includes("video")?"videocam":a.includes("audio")?"audiotrack":a.includes("pdf")?"picture_as_pdf":"description"},de=e=>{"video"!==(e.media_type||e.file_type)&&(e.editingDuration=!0,e.tempDuration=e.duration||5)},ue=async e=>{if(e.tempDuration&&e.tempDuration>0)try{const a=await fetch(`${l.value}/api/media/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("signance_token")}`},body:JSON.stringify({filename:e.filename,media_type:e.media_type||e.file_type,duration:e.tempDuration})});if(!a.ok)throw new Error("Error en la respuesta del servidor");e.duration=e.tempDuration,t.success("DuraciÃ³n actualizada correctamente")}catch(a){t.error("Error al actualizar la duraciÃ³n"),console.error("Error updating media duration:",a)}me(e)},me=e=>{e.editingDuration=!1,delete e.tempDuration};return(0,n.sV)((async()=>{V(),a.dark.set(o.value)})),(0,n.wB)(o,(e=>{a.dark.set(e)})),{backendBaseUrl:l,playlistDialog:s,editMediaDialog:i,scheduleDialog:r,playlistMediaDialog:c,playlistForm:d,editMediaForm:u,scheduleForm:p,savingPlaylist:g,savingMedia:v,savingSchedule:h,mediaLoading:f,playlists:k,stats:y,mediaFiles:M,businessInfo:$,editingPlaylist:q,editingMedia:T,selectedPlaylist:z,availableMedia:U,playlistMedias:R,weekdayOptions:B,isDarkMode:o,loadMedia:I,showCreatePlaylistDialog:X,editPlaylist:W,savePlaylist:K,deletePlaylist:O,managePlaylistMedia:Y,closePlaylistMediaDialog:ee,schedulePlaylist:Z,onMediaUploaded:Q,onMediaUploadError:j,editMedia:G,saveMediaChanges:H,deleteMedia:J,saveSchedule:ne,closePlaylistDialog:ae,closeEditMediaDialog:te,closeScheduleDialog:oe,logout:le,addMediaToPlaylist:se,removeMediaFromPlaylist:ie,reorderPlaylistMedia:re,getMediaIcon:ce,startEditDuration:de,saveDuration:ue,cancelEditDuration:me}}};const kt=(0,c.A)(ft,[["render",ya],["__scopeId","data-v-34a0aeb4"]]);var yt=kt;const bt={class:"q-pa-lg"},Lt={class:"q-mb-lg"},_t={class:"row q-gutter-md items-center"},Ft={class:"q-mb-lg"},Ct={class:"row q-gutter-md items-center"},wt={class:"q-mb-lg"},Et={class:"row q-gutter-md items-center"},St={class:"q-mb-lg"},Pt={class:"row q-gutter-md"},xt={class:"q-mt-xl"},Mt={class:"q-pa-md bg-grey-2 rounded-borders"};function It(e,a,t,o,l,s){const i=(0,n.g2)("q-icon"),r=(0,n.g2)("q-btn"),c=(0,n.g2)("q-page");return(0,n.uX)(),(0,n.Wv)(c,{padding:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",bt,[a[25]||(a[25]=(0,n.Lk)("h4",null,"Test de TamaÃ±os de Iconos - VersiÃ³n Corregida",-1)),(0,n.Lk)("div",Lt,[a[5]||(a[5]=(0,n.Lk)("h5",null,"Usando prop 'size' de Quasar:",-1)),(0,n.Lk)("div",_t,[(0,n.bF)(i,{name:"home",size:"xs"}),a[0]||(a[0]=(0,n.Lk)("span",null,"xs",-1)),(0,n.bF)(i,{name:"home",size:"sm"}),a[1]||(a[1]=(0,n.Lk)("span",null,"sm",-1)),(0,n.bF)(i,{name:"home",size:"md"}),a[2]||(a[2]=(0,n.Lk)("span",null,"md",-1)),(0,n.bF)(i,{name:"home",size:"lg"}),a[3]||(a[3]=(0,n.Lk)("span",null,"lg",-1)),(0,n.bF)(i,{name:"home",size:"xl"}),a[4]||(a[4]=(0,n.Lk)("span",null,"xl",-1))])]),(0,n.Lk)("div",Ft,[a[11]||(a[11]=(0,n.Lk)("h5",null,"Usando tamaÃ±os especÃ­ficos:",-1)),(0,n.Lk)("div",Ct,[(0,n.bF)(i,{name:"dashboard",size:"1rem"}),a[6]||(a[6]=(0,n.Lk)("span",null,"1rem",-1)),(0,n.bF)(i,{name:"dashboard",size:"1.5rem"}),a[7]||(a[7]=(0,n.Lk)("span",null,"1.5rem",-1)),(0,n.bF)(i,{name:"dashboard",size:"2rem"}),a[8]||(a[8]=(0,n.Lk)("span",null,"2rem",-1)),(0,n.bF)(i,{name:"dashboard",size:"3rem"}),a[9]||(a[9]=(0,n.Lk)("span",null,"3rem",-1)),(0,n.bF)(i,{name:"dashboard",size:"4rem"}),a[10]||(a[10]=(0,n.Lk)("span",null,"4rem",-1))])]),(0,n.Lk)("div",wt,[a[19]||(a[19]=(0,n.Lk)("h5",null,"Usando clases de texto de Quasar:",-1)),(0,n.Lk)("div",Et,[(0,n.bF)(i,{name:"star",class:"text-xs"}),a[12]||(a[12]=(0,n.Lk)("span",null,"text-xs",-1)),(0,n.bF)(i,{name:"star",class:"text-sm"}),a[13]||(a[13]=(0,n.Lk)("span",null,"text-sm",-1)),(0,n.bF)(i,{name:"star",class:"text-base"}),a[14]||(a[14]=(0,n.Lk)("span",null,"text-base",-1)),(0,n.bF)(i,{name:"star",class:"text-lg"}),a[15]||(a[15]=(0,n.Lk)("span",null,"text-lg",-1)),(0,n.bF)(i,{name:"star",class:"text-xl"}),a[16]||(a[16]=(0,n.Lk)("span",null,"text-xl",-1)),(0,n.bF)(i,{name:"star",class:"text-2xl"}),a[17]||(a[17]=(0,n.Lk)("span",null,"text-2xl",-1)),(0,n.bF)(i,{name:"star",class:"text-3xl"}),a[18]||(a[18]=(0,n.Lk)("span",null,"text-3xl",-1))])]),(0,n.Lk)("div",St,[a[20]||(a[20]=(0,n.Lk)("h5",null,"Iconos en botones:",-1)),(0,n.Lk)("div",Pt,[(0,n.bF)(r,{color:"primary",icon:"add",label:"PequeÃ±o",size:"sm"}),(0,n.bF)(r,{color:"primary",icon:"add",label:"Mediano",size:"md"}),(0,n.bF)(r,{color:"primary",icon:"add",label:"Grande",size:"lg"})])]),a[26]||(a[26]=(0,n.Lk)("div",{class:"q-mb-lg"},[(0,n.Lk)("h5",null,"Material Icons directo (para comparaciÃ³n):"),(0,n.Lk)("div",{class:"row q-gutter-md items-center"},[(0,n.Lk)("i",{class:"material-icons",style:{"font-size":"16px"}},"home"),(0,n.Lk)("span",null,"16px"),(0,n.Lk)("i",{class:"material-icons",style:{"font-size":"24px"}},"home"),(0,n.Lk)("span",null,"24px"),(0,n.Lk)("i",{class:"material-icons",style:{"font-size":"32px"}},"home"),(0,n.Lk)("span",null,"32px"),(0,n.Lk)("i",{class:"material-icons",style:{"font-size":"48px"}},"home"),(0,n.Lk)("span",null,"48px")])],-1)),(0,n.Lk)("div",xt,[a[24]||(a[24]=(0,n.Lk)("h5",null,"InformaciÃ³n de Debug:",-1)),(0,n.Lk)("div",Mt,[(0,n.Lk)("p",null,[a[21]||(a[21]=(0,n.Lk)("strong",null,"Fonts disponibles:",-1)),(0,n.eW)(" "+(0,I.v_)(l.fontsInfo.available?"SÃ­":"No"),1)]),(0,n.Lk)("p",null,[a[22]||(a[22]=(0,n.Lk)("strong",null,"Material Icons cargado:",-1)),(0,n.eW)(" "+(0,I.v_)(l.fontsInfo.materialIconsCheck?"SÃ­":"No"),1)]),(0,n.Lk)("p",null,[a[23]||(a[23]=(0,n.Lk)("strong",null,"Enlaces de fonts encontrados:",-1)),(0,n.eW)(" "+(0,I.v_)(l.materialIconsLinks.length),1)])]),(0,n.bF)(r,{color:"primary",label:"Verificar tamaÃ±os",onClick:s.checkIconSizes,class:"q-mt-md"},null,8,["onClick"])])])])),_:1})}var At={name:"IconSizeTestFixed",data(){return{fontsInfo:{available:!1,materialIconsCheck:!1},materialIconsLinks:[]}},mounted(){this.checkFontsInfo()},methods:{checkFontsInfo(){document.fonts&&(this.fontsInfo.available=!0,this.fontsInfo.materialIconsCheck=document.fonts.check('1rem "Material Icons"')),this.materialIconsLinks=Array.from(document.querySelectorAll('link[href*="material-icons"], link[href*="Material+Icons"]')).map((e=>e.href))},checkIconSizes(){const e=document.querySelectorAll(".q-icon");console.log("ðŸ” Verificando tamaÃ±os de iconos:"),e.forEach(((e,a)=>{const t=window.getComputedStyle(e),o=e.getBoundingClientRect();console.log(`Icono ${a+1}:`,{fontSize:t.fontSize,width:t.width,height:t.height,actualWidth:o.width,actualHeight:o.height,fontFamily:t.fontFamily.substring(0,50)+"...",classes:e.className})})),this.$q.notify({type:"info",message:"InformaciÃ³n de tamaÃ±os en la consola",caption:"Abre las herramientas de desarrollador para ver los detalles"})}}};const Dt=(0,c.A)(At,[["render",It],["__scopeId","data-v-453bbd34"]]);var $t=Dt;const qt=[{path:"/",name:"Selection",component:ta,meta:{requiresAuth:!1,title:"Pochtecayotl Signance System"}},{path:"/login",name:"Login",component:M,meta:{requiresAuth:!1,title:"Iniciar SesiÃ³n - Pochtecayotl Signance System"}},{path:"/config",name:"Config",component:na["default"],meta:{requiresAuth:!1,title:"ConfiguraciÃ³n - Pochtecayotl Signance System"}},{path:"/test-ok",name:"TestOk",component:se,meta:{requiresAuth:!0,title:"Prueba Exitosa - Pochtecayotl Signance System"}},{path:"/error",name:"Error",component:Ke,meta:{requiresAuth:!1,title:"Error - Pochtecayotl Signance System"}},{path:"/player",name:"Player",component:oa["default"],meta:{requiresAuth:!1,title:"Reproductor - Pochtecayotl Signance System"}},{path:"/admin",name:"Admin",component:yt,meta:{requiresAuth:!0,role:"admin",title:"Dashboard Admin - Pochtecayotl Signance System"}},{path:"/config-admin",name:"ConfigAdmin",component:()=>Promise.resolve().then(t.bind(t,600)),meta:{requiresAuth:!0,role:"admin"}},{path:"/media",name:"MediaManager",component:()=>t.e(403).then(t.bind(t,403)),meta:{requiresAuth:!0,role:"admin"}},{path:"/player-admin",name:"PlayerAdmin",component:()=>Promise.resolve().then(t.bind(t,557)),meta:{requiresAuth:!0}},{path:"/icon-test",name:"IconTest",component:()=>t.e(935).then(t.bind(t,935)),meta:{requiresAuth:!1,title:"Prueba de Iconos - Pochtecayotl Signance System"}},{path:"/diagnostic",name:"Diagnostic",component:()=>t.e(941).then(t.bind(t,941)),meta:{requiresAuth:!1,title:"DiagnÃ³stico de Iconos - Pochtecayotl Signance System"}},{path:"/simple-test",name:"SimpleTest",component:()=>t.e(650).then(t.bind(t,650)),meta:{requiresAuth:!1,title:"Prueba Simple de Iconos - Pochtecayotl Signance System"}},{path:"/final-test",name:"FinalTest",component:()=>t.e(289).then(t.bind(t,289)),meta:{requiresAuth:!1,title:"Prueba Final de Iconos - Pochtecayotl Signance System"}},{path:"/icon-size-test",name:"IconSizeTest",component:()=>t.e(990).then(t.bind(t,990)),meta:{requiresAuth:!1,title:"Prueba de TamaÃ±os de Iconos - Pochtecayotl Signance System"}},{path:"/icon-size-test-fixed",name:"IconSizeTestFixed",component:$t,meta:{requiresAuth:!1,title:"Prueba de TamaÃ±os de Iconos (Corregida) - Pochtecayotl Signance System"}}],Tt=(0,m.aE)({history:(0,m.LA)("/"),routes:qt});Tt.beforeEach(((e,a,t)=>{document.title=e.meta.title||"Pochtecayotl Signance System";const o=localStorage.getItem("signance_token"),n=!!o;e.matched.some((e=>e.meta.requiresAuth))?n?t():t({path:"/login",query:{redirect:e.fullPath}}):t()}));var zt=Tt,Ut=t(388),Rt=t(86),Bt=(t(917),t(880)),Vt=t(95);const Nt=(0,o.Ef)(u);console.log("ðŸŽ¬ Pochtecayotl Signance System - Frontend iniciado"),console.log("ðŸŽ¨ Icon set cargado:",Rt.A),(0,Bt.Yp)(),setTimeout((()=>{(0,Vt.A0)()}),500),Nt.use(F.y87,{plugins:{Notify:F.M9W,Dialog:F.lGe,Loading:F.Rhj},components:{QCard:F.C$d,QCardSection:F.XH8,QCardActions:F.zZw,QBtn:F.IlC,QInput:F.ieb,QForm:F.iXO,QPage:F.Tuf,QPageContainer:F.kci,QLayout:F.QQm,QHeader:F.rpC,QToolbar:F.ZVc,QToolbarTitle:F.r_C,QDrawer:F.psX,QList:F.Mbi,QItem:F.H0$,QItemSection:F.ypq,QItemLabel:F.TwD,QSeparator:F.N7v,QIcon:F.bP4,QSpinner:F.$fs,QLinearProgress:F.GFm,QFile:F.mt8,QUploader:F.IuS,QTable:F.kH6,QTh:F.EJt,QTr:F.qhW,QTd:F.Efd,QSelect:F.Sic,QDate:F.wZt,QTime:F.TpF,QToggle:F.c5C,QDialog:F.OQI,QExpansionItem:F.AIx,QTooltip:F.nCc,QBanner:F.GrT,QBtnToggle:F.QL$,QSkeleton:F.Rf8},lang:Ut.A,iconSet:Rt.A,config:{notify:{position:"top-right",timeout:3e3}}});const Xt={position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1};Nt.use(C.Ay,Xt),Nt.use(zt),(0,w.X3)().catch((e=>{console.warn("âš ï¸ No se pudo conectar al backend al iniciar:",e.message),console.log("ðŸ”„ La detecciÃ³n se reintentarÃ¡ automÃ¡ticamente en las prÃ³ximas peticiones")})),Nt.mount("#app")},349:function(e,a,t){t.r(a),t.d(a,{default:function(){return i}});const o={BACKEND_PREFERRED_PORT:8e3,PORT_RANGE:{start:8e3,end:8010},HEALTH_ENDPOINT:"/health",CONNECTION_TIMEOUT:3e3};function n(){const e=window.location.hostname,a=[];if(console.log(`ðŸ” Detectando IPs candidatas desde: ${e}`),"localhost"!==e&&"127.0.0.1"!==e&&(a.push(e),console.log(`âœ… Agregando IP actual del frontend: ${e}`)),a.push("127.0.0.1","localhost"),"localhost"!==e&&"127.0.0.1"!==e){const t=e.split(".");if(4===t.length&&t.every((e=>!isNaN(e)))){const e=`${t[0]}.${t[1]}.${t[2]}`;console.log(`ðŸŒ Generando IPs de la red: ${e}.x`);const o=[1,10,50,100,150,200,254];for(const t of o)a.push(`${e}.${t}`)}}const t=["192.168.1","192.168.0","192.168.100","192.168.10","10.0.0","10.0.1","10.1.1","172.16.0","172.16.1"];for(const n of t)e.startsWith(n)||a.push(`${n}.1`,`${n}.100`,`${n}.10`);const o=[...new Set(a)];return console.log(`ðŸŽ¯ ${o.length} IPs candidatas generadas:`,o),o}class l{constructor(){this.detectedPort=null,this.detectedBaseUrl=null,this.portRange=o.PORT_RANGE,this.testEndpoint=o.HEALTH_ENDPOINT,this.preferredPort=o.BACKEND_PREFERRED_PORT,this.connectionTimeout=o.CONNECTION_TIMEOUT}getCurrentHost(){const e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e?"127.0.0.1":e}getCandidateHosts(){return n()}async detectBackend(){if(console.log("ðŸ” Iniciando detecciÃ³n automÃ¡tica del backend..."),console.log(`ðŸŽ¯ Puerto preferido: ${this.preferredPort}`),console.log(`ðŸ“Š Rango de puertos: ${this.portRange.start}-${this.portRange.end}`),this.detectedPort&&this.detectedBaseUrl){console.log(`âš¡ Probando configuraciÃ³n previa: ${this.detectedBaseUrl}`);const e=new URL(this.detectedBaseUrl).hostname;if(await this.testSpecificHostPort(e,this.detectedPort))return console.log(`âœ… Backend confirmado en configuraciÃ³n previa: ${this.detectedBaseUrl}`),{port:this.detectedPort,baseUrl:this.detectedBaseUrl};console.log("âŒ ConfiguraciÃ³n previa no responde, buscando nuevamente..."),this.detectedPort=null,this.detectedBaseUrl=null}const e=this.getCandidateHosts();console.log(`ðŸŽ¯ ${e.length} hosts candidatos detectados`),console.log(`ðŸš€ FASE 1: Probando puerto preferido ${this.preferredPort} en todas las IPs...`);for(const a of e)if(console.log(`ðŸ” Probando ${a}:${this.preferredPort}`),await this.testSpecificHostPort(a,this.preferredPort))return this.detectedPort=this.preferredPort,this.detectedBaseUrl=`http://${a}:${this.preferredPort}`,console.log(`âœ… Â¡Backend encontrado en puerto preferido! ${this.detectedBaseUrl}`),this.saveToLocalStorage(a,this.preferredPort),{port:this.detectedPort,baseUrl:this.detectedBaseUrl};console.log(`ðŸ” FASE 2: Buscando en rango completo ${this.portRange.start}-${this.portRange.end}...`);for(const a of e){console.log(`ðŸ” Probando host: ${a}`);for(let e=this.portRange.start;e<=this.portRange.end;e++)if(e!==this.preferredPort&&(console.log(`ðŸ” Probando puerto ${e} en ${a}...`),await this.testSpecificHostPort(a,e)))return this.detectedPort=e,this.detectedBaseUrl=`http://${a}:${e}`,console.log(`âœ… Â¡Backend encontrado en ${this.detectedBaseUrl}!`),this.saveToLocalStorage(a,e),{port:this.detectedPort,baseUrl:this.detectedBaseUrl}}throw new Error(`âŒ No se pudo encontrar el backend en ningÃºn host candidato (${e.join(", ")}) en puertos ${this.portRange.start}-${this.portRange.end}`)}async testPort(e){if(this.detectedBaseUrl){const a=new URL(this.detectedBaseUrl).hostname;return await this.testSpecificHostPort(a,e)}const a=window.location.hostname;return await this.testSpecificHostPort(a,e)}async testSpecificHostPort(e,a){const t=`http://${e}:${a}`;try{const o=new AbortController,n=setTimeout((()=>o.abort()),3e3),l=await fetch(`${t}${this.testEndpoint}`,{method:"GET",signal:o.signal,mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"}});if(clearTimeout(n),l.ok){const t=await l.json();if("healthy"===t.status||"auth"===t.module||200===l.status)return console.log(`âœ… Puerto ${a} en ${e}: Backend FastAPI confirmado - ${JSON.stringify(t)}`),!0}}catch(o){"AbortError"===o.name?console.log(`â±ï¸ Puerto ${a} en ${e}: Timeout (3s)`):console.log(`âŒ Puerto ${a} en ${e}: ${o.message}`)}return!1}getCachedBackend(){const e=localStorage.getItem("signance_backend_port"),a=localStorage.getItem("signance_backend_url"),t=localStorage.getItem("signance_backend_host"),o=window.location.hostname;return t&&t!==o?(console.log(`ðŸ”„ Host cambiÃ³ de ${t} a ${o}, limpiando cachÃ©...`),this.clearCache(),null):e&&a?{port:parseInt(e),baseUrl:a}:null}clearCache(){localStorage.removeItem("signance_backend_port"),localStorage.removeItem("signance_backend_url"),localStorage.removeItem("signance_backend_host"),this.detectedPort=null,this.detectedBaseUrl=null}startHealthCheck(e){this.healthCheckInterval&&clearInterval(this.healthCheckInterval),this.healthCheckInterval=setInterval((async()=>{if(this.detectedPort){const a=await this.testPort(this.detectedPort);!a&&e&&(console.log("âŒ ConexiÃ³n con backend perdida"),e())}}),3e4)}stopHealthCheck(){this.healthCheckInterval&&(clearInterval(this.healthCheckInterval),this.healthCheckInterval=null)}saveToLocalStorage(e,a){const t=`http://${e}:${a}`;localStorage.setItem("signance_backend_port",a.toString()),localStorage.setItem("signance_backend_url",t),localStorage.setItem("signance_backend_host",e),console.log(`ðŸ’¾ ConfiguraciÃ³n guardada: ${t}`)}}const s=new l;var i=s},442:function(e,a,t){t.d(a,{ek:function(){return u},getMediaUrl:function(){return m}});var o=t(335),n=t(349),l=t(680);let s=o.A.create({baseURL:"",timeout:15e3,headers:{"Content-Type":"application/json"}}),i=!1,r=null;const c=async()=>i?s:r||(r=(async()=>{try{console.log("ðŸŽ¬ Inicializando API del reproductor...");const e=(0,l.w)();if(e)return console.log("ðŸŽ¯ Player API en modo producciÃ³n, usando mismo origen"),s.defaults.baseURL=`${e.baseUrl}/api`,await s.get("/health",{timeout:5e3}),i=!0,console.log(`âœ… Player API inicializada en modo producciÃ³n: ${e.baseUrl}`),s;console.log("ðŸ”§ Player API en modo desarrollo, detectando backend...");const{baseUrl:a}=await n["default"].detectBackend();return s.defaults.baseURL=`${a}/api`,await s.get("/health",{timeout:5e3}),i=!0,console.log(`âœ… API del reproductor inicializada: ${a}`),s}catch(e){console.error("âŒ Error inicializando API del reproductor:",e),s.defaults.baseURL="http://127.0.0.1:8000/api";try{return await s.get("/health",{timeout:3e3}),console.log("âœ… API del reproductor inicializada con fallback localhost:8000"),i=!0,s}catch(a){throw console.error("âŒ Fallback tambiÃ©n fallÃ³:",a),new Error("No se pudo conectar con el backend para el reproductor.")}}})(),r),d=async()=>(i||await c(),s),u={list:async(e=0,a=100)=>{const t=await d();return t.get(`/player/playlists?skip=${e}&limit=${a}`)},listPlaylists:async(e=0,a=100)=>{const t=await d();return t.get(`/player/playlists?skip=${e}&limit=${a}`)},getPlaylist:async e=>{const a=await d();return a.get(`/player/playlists/${e}/complete`)},getPlaylistInfo:async e=>{const a=await d();return a.get(`/player/playlists/${e}`)}},m=async e=>{if(!e)return"";console.log("ðŸ› getMediaUrl - Entrada:",e);try{const a=(0,l.w)();let t;if(a)t=a.baseUrl,console.log("ðŸ› getMediaUrl - Usando producciÃ³n:",t);else{const e=await n["default"].detectBackend();t=e.baseUrl,console.log("ðŸ› getMediaUrl - Backend detectado:",e)}if(e.file_url){const a=`${t}${e.file_url}`;return console.log("ðŸ› getMediaUrl - URL final con file_url:",a),a}let o=e.filepath||e.served_filename||e.filename;console.log("ðŸ› getMediaUrl - Filepath fallback:",o),o.startsWith("/uploads/")||(o=`/uploads/${o}`);const s=`${t}${o}`;return console.log("ðŸ› getMediaUrl - URL final con fallback:",s),s}catch(a){let t;if(console.error("ðŸ› getMediaUrl - Error construyendo URL de media:",a),e.file_url)t=e.file_url;else{const a=e.served_filename||e.filename;t=`/uploads/${a}`}const o=`http://127.0.0.1:8000${t}`;return console.log("ðŸ› getMediaUrl - URL de fallback:",o),o}}},503:function(e,a,t){t.d(a,{A:function(){return ae}});var o=t(641),n=t(33),l=t(953);const s={class:"media-preview"},i={key:0,class:"image-preview"},r=["src","alt"],c={key:1,class:"video-preview"},d=["src"],u={class:"video-overlay"},m={key:0,class:"video-duration"},p={key:2,class:"file-preview"},g={class:"media-info"},v=["title"],h={class:"media-meta"},f={class:"file-size"},k={key:0,class:"upload-date"},y={class:"media-actions"};var b={__name:"MediaCard",props:{media:{type:Object,required:!0},backendBaseUrl:{type:String,default:""},compact:{type:Boolean,default:!1}},emits:["edit","delete"],setup(e){const a=e,t=(0,o.EW)((()=>{const e=a.backendBaseUrl||"",t=a.media.file_url||`/uploads/${a.media.served_filename||a.media.filename}`;return`${e}${t}`})),l=(0,o.EW)((()=>{const e=a.media.file_type||a.media.media_type||"";return"image"===e||/\.(jpg|jpeg|png|gif|webp|bmp)$/i.test(a.media.filename)})),b=(0,o.EW)((()=>{const e=a.media.file_type||a.media.media_type||"";return"video"===e||/\.(mp4|avi|mov|mkv|webm)$/i.test(a.media.filename)})),L=()=>{const e=a.media.filename||"",t=e.split(".").pop()?.toLowerCase();switch(t){case"pdf":return"picture_as_pdf";case"doc":case"docx":return"description";case"mp3":case"wav":case"aac":return"audiotrack";default:return"insert_drive_file"}},_=e=>{if(!e)return"N/A";const a=["B","KB","MB","GB"],t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+a[t]},F=e=>{if(!e)return"";const a=Math.floor(e/60),t=Math.floor(e%60);return`${a}:${t.toString().padStart(2,"0")}`},C=e=>{if(!e)return"";const a=new Date(e);return a.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})},w=e=>{const a=e.target,t=a.closest(".image-preview");t&&(t.innerHTML='\n      <div class="file-preview">\n        <q-icon name="broken_image" size="3rem" color="grey-6" />\n      </div>\n    ')},E=e=>{const a=e.target,t=a.closest(".video-preview");t&&(t.innerHTML='\n      <div class="file-preview">\n        <q-icon name="error" size="3rem" color="grey-6" />\n      </div>\n    ')};return(a,S)=>{const P=(0,o.g2)("q-icon"),x=(0,o.g2)("q-tooltip"),M=(0,o.g2)("q-btn");return(0,o.uX)(),(0,o.CE)("div",{class:(0,n.C4)(["media-card",{"compact-card":e.compact}])},[(0,o.Lk)("div",s,[l.value?((0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("img",{src:t.value,alt:e.media.filename,onError:w,class:"preview-img"},null,40,r)])):b.value?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("video",{src:t.value,class:"preview-video",muted:"",preload:"metadata",onError:E},null,40,d),(0,o.Lk)("div",u,[(0,o.bF)(P,{name:"play_circle_filled",size:"2.5rem",class:"play-icon"}),e.media.duration?((0,o.uX)(),(0,o.CE)("div",m,(0,n.v_)(F(e.media.duration)),1)):(0,o.Q3)("",!0)])])):((0,o.uX)(),(0,o.CE)("div",p,[(0,o.bF)(P,{name:L(),size:"3rem",color:"grey-6"},null,8,["name"])]))]),(0,o.Lk)("div",g,[(0,o.Lk)("h4",{class:"media-title",title:e.media.filename},(0,n.v_)(e.media.filename),9,v),(0,o.Lk)("p",h,[(0,o.Lk)("span",f,(0,n.v_)(_(e.media.file_size||e.media.size)),1),e.media.created_at?((0,o.uX)(),(0,o.CE)("span",k,(0,n.v_)(C(e.media.created_at)),1)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",y,[(0,o.bF)(M,{flat:"",round:"",icon:"edit",onClick:S[0]||(S[0]=e=>a.$emit("edit")),size:"sm",color:"primary"},{default:(0,o.k6)((()=>[(0,o.bF)(x,null,{default:(0,o.k6)((()=>S[2]||(S[2]=[(0,o.eW)("Editar")]))),_:1,__:[2]})])),_:1}),(0,o.bF)(M,{flat:"",round:"",icon:"delete",onClick:S[1]||(S[1]=e=>a.$emit("delete")),size:"sm",color:"negative"},{default:(0,o.k6)((()=>[(0,o.bF)(x,null,{default:(0,o.k6)((()=>S[3]||(S[3]=[(0,o.eW)("Eliminar")]))),_:1,__:[3]})])),_:1})])],2)}}},L=t(262);const _=(0,L.A)(b,[["__scopeId","data-v-0ad5556d"]]);var F=_;const C={class:"media-list-item"},w={class:"media-thumbnail"},E={key:0,class:"image-thumb"},S=["src","alt"],P={key:1,class:"video-thumb"},x=["src"],M={key:2,class:"file-thumb"},I={class:"media-details"},A={class:"media-name"},D={key:0},$={class:"media-metadata"},q={class:"meta-item"},T={class:"meta-item"},z={key:0,class:"meta-item"},U={key:1,class:"meta-item"},R={class:"media-list-actions"};var B={__name:"MediaListItem",props:{media:{type:Object,required:!0},backendBaseUrl:{type:String,default:""}},emits:["edit","delete"],setup(e){const a=e,t=(0,o.EW)((()=>{const e=a.backendBaseUrl||"",t=a.media.file_url||`/uploads/${a.media.served_filename||a.media.filename}`;return`${e}${t}`})),l=(0,o.EW)((()=>{const e=a.media.file_type||a.media.media_type||"";return"image"===e||/\.(jpg|jpeg|png|gif|webp|bmp)$/i.test(a.media.filename)})),s=(0,o.EW)((()=>{const e=a.media.file_type||a.media.media_type||"";return"video"===e||/\.(mp4|avi|mov|mkv|webm)$/i.test(a.media.filename)})),i=()=>{const e=a.media.filename||"",t=e.split(".").pop()?.toLowerCase();switch(t){case"pdf":return"picture_as_pdf";case"doc":case"docx":return"description";case"mp3":case"wav":case"aac":return"audiotrack";default:return"insert_drive_file"}},r=()=>{const e=a.media.file_type||a.media.media_type;if(e)return e.charAt(0).toUpperCase()+e.slice(1);const t=a.media.filename||"",o=t.split(".").pop()?.toLowerCase();return o?o.toUpperCase():"Archivo"},c=e=>{if(!e)return"N/A";const a=["B","KB","MB","GB"],t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+a[t]},d=e=>{if(!e)return"";const a=Math.floor(e/60),t=Math.floor(e%60);return`${a}:${t.toString().padStart(2,"0")}`},u=e=>{if(!e)return"";const a=new Date(e);return a.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},m=e=>{const a=e.target,t=a.closest(".image-thumb");t&&(t.innerHTML='\n      <div class="file-thumb">\n        <q-icon name="broken_image" size="2rem" color="grey-6" />\n      </div>\n    ')},p=e=>{const a=e.target,t=a.closest(".video-thumb");t&&(t.innerHTML='\n      <div class="file-thumb">\n        <q-icon name="error" size="2rem" color="grey-6" />\n      </div>\n    ')};return(a,g)=>{const v=(0,o.g2)("q-icon"),h=(0,o.g2)("q-tooltip"),f=(0,o.g2)("q-btn");return(0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("div",w,[l.value?((0,o.uX)(),(0,o.CE)("div",E,[(0,o.Lk)("img",{src:t.value,alt:e.media.filename,onError:m},null,40,S)])):s.value?((0,o.uX)(),(0,o.CE)("div",P,[(0,o.Lk)("video",{src:t.value,muted:"",preload:"metadata",onError:p},null,40,x),(0,o.bF)(v,{name:"play_circle_filled",class:"play-overlay"})])):((0,o.uX)(),(0,o.CE)("div",M,[(0,o.bF)(v,{name:i(),size:"2rem"},null,8,["name"])]))]),(0,o.Lk)("div",I,[(0,o.Lk)("div",A,[(0,o.Lk)("h4",null,(0,n.v_)(e.media.filename),1),e.media.description?((0,o.uX)(),(0,o.CE)("p",D,(0,n.v_)(e.media.description),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",$,[(0,o.Lk)("div",q,[(0,o.bF)(v,{name:"folder",size:"sm"}),(0,o.Lk)("span",null,(0,n.v_)(r()),1)]),(0,o.Lk)("div",T,[(0,o.bF)(v,{name:"data_usage",size:"sm"}),(0,o.Lk)("span",null,(0,n.v_)(c(e.media.file_size||e.media.size)),1)]),e.media.duration?((0,o.uX)(),(0,o.CE)("div",z,[(0,o.bF)(v,{name:"schedule",size:"sm"}),(0,o.Lk)("span",null,(0,n.v_)(d(e.media.duration)),1)])):(0,o.Q3)("",!0),e.media.created_at?((0,o.uX)(),(0,o.CE)("div",U,[(0,o.bF)(v,{name:"event",size:"sm"}),(0,o.Lk)("span",null,(0,n.v_)(u(e.media.created_at)),1)])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",R,[(0,o.bF)(f,{flat:"",round:"",icon:"edit",onClick:g[0]||(g[0]=e=>a.$emit("edit")),size:"sm",color:"primary"},{default:(0,o.k6)((()=>[(0,o.bF)(h,null,{default:(0,o.k6)((()=>g[2]||(g[2]=[(0,o.eW)("Editar")]))),_:1,__:[2]})])),_:1}),(0,o.bF)(f,{flat:"",round:"",icon:"delete",onClick:g[1]||(g[1]=e=>a.$emit("delete")),size:"sm",color:"negative"},{default:(0,o.k6)((()=>[(0,o.bF)(h,null,{default:(0,o.k6)((()=>g[3]||(g[3]=[(0,o.eW)("Eliminar")]))),_:1,__:[3]})])),_:1})])])}}};const V=(0,L.A)(B,[["__scopeId","data-v-4dde5f74"]]);var N=V;const X={class:"gallery-header"},W={class:"header-info"},K={class:"header-text"},O={class:"header-controls"},Q={key:1,class:"view-controls"},j={class:"gallery-content"},G={key:0,class:"empty-state"},H={key:1,class:"loading-state"},J={key:3,class:"media-list"},Z={key:0,class:"show-more"};var Y={__name:"MediaGallery",props:{mediaFiles:{type:Array,default:()=>[]},backendBaseUrl:{type:String,default:""},loading:{type:Boolean,default:!1},mode:{type:String,default:"compact",validator:e=>["compact","full"].includes(e)},title:{type:String,default:""},subtitle:{type:String,default:""},maxItems:{type:Number,default:6}},emits:["refresh","edit","delete","show-all"],setup(e){const a=e,t=(0,l.KR)(""),s=(0,l.KR)("grid"),i=(0,o.EW)((()=>{if(!a.mediaFiles)return[];let e=[...a.mediaFiles];if(t.value){const a=t.value.toLowerCase();e=e.filter((e=>e.filename?.toLowerCase().includes(a)||e.description?.toLowerCase().includes(a)))}return e.sort(((e,a)=>{const t=new Date(e.created_at||e.upload_date||0),o=new Date(a.created_at||a.upload_date||0);return o-t})),e})),r=(0,o.EW)((()=>"compact"===a.mode?i.value.slice(0,a.maxItems):i.value));return(a,l)=>{const c=(0,o.g2)("q-icon"),d=(0,o.g2)("q-input"),u=(0,o.g2)("q-btn-toggle"),m=(0,o.g2)("q-tooltip"),p=(0,o.g2)("q-btn"),g=(0,o.g2)("q-skeleton");return(0,o.uX)(),(0,o.CE)("div",{class:(0,n.C4)(["media-gallery",{"full-view":"full"===e.mode,"compact-view":"compact"===e.mode}])},[(0,o.Lk)("div",X,[(0,o.Lk)("div",W,[(0,o.bF)(c,{name:"video_library",size:"2rem"}),(0,o.Lk)("div",K,[(0,o.Lk)("h3",null,(0,n.v_)(e.title||"Archivos Multimedia"),1),(0,o.Lk)("p",null,(0,n.v_)(e.subtitle||("full"===e.mode?"Gestiona tu biblioteca completa":"Archivos recientes")),1)])]),(0,o.Lk)("div",O,["full"===e.mode?((0,o.uX)(),(0,o.Wv)(d,{key:0,modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=e=>t.value=e),placeholder:"Buscar archivos...",outlined:"",dense:"",class:"search-input"},{prepend:(0,o.k6)((()=>[(0,o.bF)(c,{name:"search"})])),append:(0,o.k6)((()=>[t.value?((0,o.uX)(),(0,o.Wv)(c,{key:0,name:"clear",onClick:l[0]||(l[0]=e=>t.value=""),class:"cursor-pointer"})):(0,o.Q3)("",!0)])),_:1},8,["modelValue"])):(0,o.Q3)("",!0),"full"===e.mode?((0,o.uX)(),(0,o.CE)("div",Q,[(0,o.bF)(u,{modelValue:s.value,"onUpdate:modelValue":l[2]||(l[2]=e=>s.value=e),options:[{label:"Tarjetas",value:"grid",icon:"grid_view"},{label:"Lista",value:"list",icon:"view_list"}],flat:"",color:"primary","toggle-color":"primary","no-caps":""},null,8,["modelValue"])])):(0,o.Q3)("",!0),(0,o.bF)(p,{flat:"",icon:"refresh",onClick:l[3]||(l[3]=e=>a.$emit("refresh")),loading:e.loading,round:"",color:"primary"},{default:(0,o.k6)((()=>[(0,o.bF)(m,null,{default:(0,o.k6)((()=>l[5]||(l[5]=[(0,o.eW)("Actualizar")]))),_:1,__:[5]})])),_:1},8,["loading"])])]),(0,o.Lk)("div",j,[0!==i.value.length||e.loading?e.loading?((0,o.uX)(),(0,o.CE)("div",H,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)("compact"===e.mode?8:6,(e=>((0,o.uX)(),(0,o.Wv)(g,{height:"150px",class:"q-mb-md",key:e})))),128))])):"grid"===s.value?((0,o.uX)(),(0,o.CE)("div",{key:2,class:(0,n.C4)(["media-grid",{"compact-grid":"compact"===e.mode}])},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.value,(t=>((0,o.uX)(),(0,o.Wv)(F,{key:t.id,media:t,"backend-base-url":e.backendBaseUrl,compact:"compact"===e.mode,onEdit:e=>a.$emit("edit",t),onDelete:e=>a.$emit("delete",t.id)},null,8,["media","backend-base-url","compact","onEdit","onDelete"])))),128))],2)):"list"===s.value&&"full"===e.mode?((0,o.uX)(),(0,o.CE)("div",J,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.value,(t=>((0,o.uX)(),(0,o.Wv)(N,{key:t.id,media:t,"backend-base-url":e.backendBaseUrl,onEdit:e=>a.$emit("edit",t),onDelete:e=>a.$emit("delete",t.id)},null,8,["media","backend-base-url","onEdit","onDelete"])))),128))])):(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",G,[(0,o.bF)(c,{name:"video_library",size:"4rem",color:"grey-5"}),(0,o.Lk)("h4",null,(0,n.v_)(t.value?"No se encontraron archivos":"No hay archivos multimedia"),1),(0,o.Lk)("p",null,(0,n.v_)(t.value?"Intenta con otros tÃ©rminos de bÃºsqueda":"Sube tus primeros archivos multimedia"),1)]))]),"compact"===e.mode&&e.mediaFiles.length>e.maxItems?((0,o.uX)(),(0,o.CE)("div",Z,[(0,o.bF)(p,{flat:"",color:"primary",label:`Ver todos (${e.mediaFiles.length} archivos)`,icon:"arrow_forward",onClick:l[4]||(l[4]=e=>a.$emit("show-all"))},null,8,["label"])])):(0,o.Q3)("",!0)],2)}}};const ee=(0,L.A)(Y,[["__scopeId","data-v-8cf16336"]]);var ae=ee},557:function(e,a,t){t.r(a),t.d(a,{default:function(){return ge}});var o=t(641),n=t(33);const l={key:1,class:"selection-state"},s={class:"player-header"},i={class:"header-content"},r={class:"header-icon"},c={class:"main-content"},d={class:"content-card"},u={key:0,class:"loading-section"},m={key:1,class:"playlists-section"},p={class:"section-header"},g={class:"playlist-count"},v={class:"playlists-grid"},h=["onClick"],f={class:"playlist-icon"},k={class:"playlist-info"},y={class:"playlist-meta"},b={class:"meta-item"},L={class:"meta-item"},_={class:"playlist-action"},F={key:2,class:"empty-state"},C={class:"empty-icon"},w={class:"empty-actions"},E={class:"footer-actions"},S={key:2,class:"player-state"},P={class:"media-display-area"},x={key:0,class:"media-container"},M={key:0,class:"image-display"},I=["src","alt"],A={key:1,class:"video-display"},D=["src"],$={key:2,class:"loading-media"},q={key:3,class:"media-info-overlay"},T={class:"media-info"},z={class:"media-details"},U={key:1,class:"loading-media"},R={key:0,class:"player-controls normal-controls"},B={class:"control-panel"},V={class:"playlist-info-controls"},N={class:"media-controls"},X={class:"progress-info"},W={class:"progress-bar"},K={class:"time-info"},O={class:"additional-controls"},Q={key:2,class:"business-logo-overlay"},j=["src"],G={key:3,class:"schedule-notification"};function H(e,a,t,H,J,Z){const Y=(0,o.g2)("ThemeToggle"),ee=(0,o.g2)("q-icon"),ae=(0,o.g2)("q-spinner"),te=(0,o.g2)("q-btn"),oe=(0,o.g2)("q-spinner-dots"),ne=(0,o.g2)("q-linear-progress"),le=(0,o.g2)("q-tooltip"),se=(0,o.g2)("q-banner");return(0,o.uX)(),(0,o.CE)("div",{class:(0,n.C4)(["player-container",{"fullscreen-mode":H.isFullscreen}]),onMousemove:a[5]||(a[5]=e=>H.isFullscreen?H.onMouseMoveFullscreen():null)},[H.isFullscreen?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(Y,{key:0,class:"theme-toggle"})),H.selectedPlaylist?((0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("div",P,[H.currentMedia?((0,o.uX)(),(0,o.CE)("div",x,["image"===H.currentMedia.media_type&&H.currentMediaSrc?((0,o.uX)(),(0,o.CE)("div",M,[(0,o.Lk)("img",{src:H.currentMediaSrc,alt:H.currentMedia.filename,class:"media-image",onError:a[0]||(a[0]=(...e)=>H.handleMediaError&&H.handleMediaError(...e)),onLoad:a[1]||(a[1]=(...e)=>H.onMediaLoaded&&H.onMediaLoaded(...e))},null,40,I)])):"video"===H.currentMedia.media_type&&H.currentMediaSrc?((0,o.uX)(),(0,o.CE)("div",A,[(0,o.Lk)("video",{ref:"videoPlayer",src:H.currentMediaSrc,class:"media-video",onEnded:a[2]||(a[2]=(...e)=>H.onMediaEnded&&H.onMediaEnded(...e)),onError:a[3]||(a[3]=(...e)=>H.handleMediaError&&H.handleMediaError(...e)),onLoadeddata:a[4]||(a[4]=(...e)=>H.onMediaLoaded&&H.onMediaLoaded(...e)),autoplay:"",muted:""},null,40,D)])):H.currentMedia&&!H.currentMediaSrc?((0,o.uX)(),(0,o.CE)("div",$,[(0,o.bF)(oe,{color:"primary",size:"3rem"}),(0,o.Lk)("p",null,"Preparando "+(0,n.v_)(H.currentMedia.filename)+"...",1)])):(0,o.Q3)("",!0),H.showInfo?((0,o.uX)(),(0,o.CE)("div",q,[(0,o.Lk)("div",T,[(0,o.Lk)("h3",null,(0,n.v_)(H.currentMedia.filename),1),(0,o.Lk)("p",null,(0,n.v_)(H.currentMedia.description||"Sin descripciÃ³n"),1),(0,o.Lk)("div",z,[(0,o.Lk)("span",null,"DuraciÃ³n: "+(0,n.v_)(H.getCurrentDuration())+"s",1),(0,o.Lk)("span",null,"Tipo: "+(0,n.v_)(H.currentMedia.media_type),1),(0,o.Lk)("span",null,"PosiciÃ³n: "+(0,n.v_)(H.currentMediaIndex+1)+"/"+(0,n.v_)(H.playlistMedia.length),1)])])])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",U,[(0,o.bF)(ae,{color:"primary",size:"4rem"}),a[11]||(a[11]=(0,o.Lk)("p",null,"Cargando prÃ³ximo contenido...",-1))]))]),H.isFullscreen?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",R,[(0,o.Lk)("div",B,[(0,o.Lk)("div",V,[(0,o.Lk)("h4",null,(0,n.v_)(H.selectedPlaylist.name),1),(0,o.Lk)("p",null,(0,n.v_)(H.playlistMedia.length)+" elementos â€¢ Reproduciendo en bucle",1)]),(0,o.Lk)("div",N,[(0,o.bF)(te,{icon:H.isPlaying?"pause":"play_arrow",onClick:H.togglePlayPause,color:"primary",size:"lg",round:"",class:"play-pause-btn"},null,8,["icon","onClick"]),(0,o.bF)(te,{icon:"skip_next",onClick:H.skipToNext,color:"secondary",size:"md",round:"",class:"skip-btn"},null,8,["onClick"]),(0,o.bF)(te,{icon:"skip_previous",onClick:H.skipToPrevious,color:"secondary",size:"md",round:"",class:"skip-btn"},null,8,["onClick"])]),(0,o.Lk)("div",X,[(0,o.Lk)("div",W,[(0,o.bF)(ne,{value:H.progress,color:"primary",size:"4px",class:"media-progress"},null,8,["value"]),(0,o.Lk)("div",K,[(0,o.Lk)("span",null,(0,n.v_)(H.formatTime(H.elapsedTime)),1),(0,o.Lk)("span",null,(0,n.v_)(H.formatTime(H.getCurrentDuration())),1)])])]),(0,o.Lk)("div",O,[(0,o.bF)(te,{icon:H.showInfo?"info":"info_outline",onClick:H.toggleInfo,flat:"",round:"",class:"info-btn"},{default:(0,o.k6)((()=>[(0,o.bF)(le,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(H.showInfo?"Ocultar":"Mostrar")+" informaciÃ³n",1)])),_:1})])),_:1},8,["icon","onClick"]),(0,o.bF)(te,{icon:"fullscreen",onClick:H.toggleFullscreen,flat:"",round:"",size:"md",class:"fullscreen-btn"},{default:(0,o.k6)((()=>[(0,o.bF)(le,null,{default:(0,o.k6)((()=>a[12]||(a[12]=[(0,o.eW)("Pantalla completa")]))),_:1,__:[12]})])),_:1},8,["onClick"]),(0,o.bF)(te,{icon:"bug_report",onClick:H.debugCurrentMedia,flat:"",round:"",color:"orange",class:"debug-btn"},{default:(0,o.k6)((()=>[(0,o.bF)(le,null,{default:(0,o.k6)((()=>a[13]||(a[13]=[(0,o.eW)("Debug URLs")]))),_:1,__:[13]})])),_:1},8,["onClick"]),(0,o.bF)(te,{icon:"stop",onClick:H.stopPlayback,flat:"",round:"",color:"negative",class:"stop-btn"},{default:(0,o.k6)((()=>[(0,o.bF)(le,null,{default:(0,o.k6)((()=>a[14]||(a[14]=[(0,o.eW)("Detener y volver")]))),_:1,__:[14]})])),_:1},8,["onClick"])])])])),H.isFullscreen?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,n.C4)(["fullscreen-exit-overlay",{visible:H.showFullscreenControls}])},[(0,o.bF)(te,{icon:"fullscreen_exit",onClick:H.toggleFullscreen,color:"white","text-color":"black",size:"xl",round:"",class:"exit-fullscreen-btn"},{default:(0,o.k6)((()=>[(0,o.bF)(le,null,{default:(0,o.k6)((()=>a[15]||(a[15]=[(0,o.eW)("Salir de pantalla completa (ESC)")]))),_:1,__:[15]})])),_:1},8,["onClick"])],2)):(0,o.Q3)("",!0),H.isFullscreen&&H.businessLogo?((0,o.uX)(),(0,o.CE)("div",Q,[(0,o.Lk)("img",{src:H.businessLogo,alt:"Logo",class:"business-logo"},null,8,j)])):(0,o.Q3)("",!0),H.scheduleOverride&&!H.isFullscreen?((0,o.uX)(),(0,o.CE)("div",G,[(0,o.bF)(se,{class:"bg-orange text-white"},{avatar:(0,o.k6)((()=>[(0,o.bF)(ee,{name:"schedule"})])),action:(0,o.k6)((()=>[(0,o.bF)(te,{flat:"",icon:"close",onClick:H.dismissScheduleNotification},null,8,["onClick"])])),default:(0,o.k6)((()=>[a[16]||(a[16]=(0,o.Lk)("strong",null,"ProgramaciÃ³n Activa",-1)),a[17]||(a[17]=(0,o.Lk)("br",null,null,-1)),(0,o.eW)(' Reproduciendo contenido programado: "'+(0,n.v_)(H.scheduleOverride.media.filename)+'" ',1)])),_:1,__:[16,17]})])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",l,[(0,o.Lk)("div",s,[(0,o.Lk)("div",i,[(0,o.Lk)("div",r,[(0,o.bF)(ee,{name:"play_circle_filled",size:"3rem"})]),a[6]||(a[6]=(0,o.Lk)("div",{class:"header-text"},[(0,o.Lk)("h2",null,"Reproductor de Contenido"),(0,o.Lk)("p",null,"Seleccione una playlist para comenzar la reproducciÃ³n")],-1))])]),(0,o.Lk)("div",c,[(0,o.Lk)("div",d,[H.loading?((0,o.uX)(),(0,o.CE)("div",u,[(0,o.bF)(ae,{color:"primary",size:"3rem"}),a[7]||(a[7]=(0,o.Lk)("p",{class:"loading-text"},"Cargando playlists...",-1))])):H.playlists.length?((0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("div",p,[a[8]||(a[8]=(0,o.Lk)("h3",null,"Playlists Disponibles",-1)),(0,o.Lk)("div",g,(0,n.v_)(H.playlists.length)+" playlist"+(0,n.v_)(1!==H.playlists.length?"s":"")+" disponible"+(0,n.v_)(1!==H.playlists.length?"s":""),1)]),(0,o.Lk)("div",v,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(H.playlists,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"playlist-card",onClick:a=>H.selectPlaylist(e)},[(0,o.Lk)("div",f,[(0,o.bF)(ee,{name:"queue_music",size:"2.5rem"})]),(0,o.Lk)("div",k,[(0,o.Lk)("h4",null,(0,n.v_)(e.name),1),(0,o.Lk)("p",null,(0,n.v_)(e.description||"Lista de reproducciÃ³n de contenido multimedia"),1),(0,o.Lk)("div",y,[(0,o.Lk)("span",b,[(0,o.bF)(ee,{name:"schedule",size:"1rem"}),(0,o.eW)(" "+(0,n.v_)(H.formatTotalDuration(e.total_duration)),1)]),(0,o.Lk)("span",L,[(0,o.bF)(ee,{name:"playlist_play",size:"1rem"}),(0,o.eW)(" "+(0,n.v_)(e.media_count||0)+" elementos ",1)])])]),(0,o.Lk)("div",_,[(0,o.bF)(ee,{name:"play_arrow",size:"1.5rem"})])],8,h)))),128))])])):((0,o.uX)(),(0,o.CE)("div",F,[(0,o.Lk)("div",C,[(0,o.bF)(ee,{name:"playlist_remove",size:"4rem"})]),a[9]||(a[9]=(0,o.Lk)("h3",null,"No hay playlists disponibles",-1)),a[10]||(a[10]=(0,o.Lk)("p",null,"Actualmente no hay ninguna playlist configurada en el sistema.",-1)),(0,o.Lk)("div",w,[(0,o.bF)(te,{color:"primary",icon:"add",label:"Crear Playlist",onClick:H.goToAdmin,rounded:"",unelevated:""},null,8,["onClick"])])]))])]),(0,o.Lk)("div",E,[(0,o.bF)(te,{color:"secondary",icon:"arrow_back",label:"Volver",onClick:H.goBack,outline:"",rounded:""},null,8,["onClick"]),(0,o.bF)(te,{color:"accent",icon:"refresh",label:"Actualizar",onClick:H.fetchPlaylists,rounded:"",unelevated:""},null,8,["onClick"])])]))],34)}var J=t(953),Z=t(220),Y=t(442),ee=t(349),ae=t(246),te=t(697),oe=t(725);class ne{constructor(){this.socket=null,this.connected=!1,this.listeners=new Map,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.detectedBackendUrl=null}async getWebSocketUrl(){try{let e=this.detectedBackendUrl;if(!e){const{baseUrl:a}=await ee["default"].detectBackend();this.detectedBackendUrl=a,e=a}const a=e.replace("http://","ws://")+"/ws";return console.log(`ðŸŽ¯ URL WebSocket generada: ${a}`),a}catch(e){return console.error("âŒ Error obteniendo URL del WebSocket:",e),"ws://127.0.0.1:8002/ws"}}async connect(e=null){try{e||(e=await this.getWebSocketUrl()),console.log(`ðŸ”Œ Conectando WebSocket a: ${e}`),this.socket=new WebSocket(e),this.socket.onopen=()=>{console.log("âœ… WebSocket conectado"),this.connected=!0,this.reconnectAttempts=0,this.emit("connection-status",{connected:!0})},this.socket.onclose=a=>{console.log("âŒ WebSocket desconectado:",a.code,a.reason),this.connected=!1,this.emit("connection-status",{connected:!1,reason:a.reason}),this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,console.log(`ðŸ”„ Intentando reconectar (${this.reconnectAttempts}/${this.maxReconnectAttempts})...`),setTimeout((()=>this.connect(e)),this.reconnectDelay*this.reconnectAttempts))},this.socket.onerror=e=>{console.error("âŒ Error de conexiÃ³n WebSocket:",e),this.emit("connection-error",e)},this.socket.onmessage=e=>{try{const a=JSON.parse(e.data);a.event&&a.data&&this.emit(a.event,a.data)}catch(a){console.error("Error parseando mensaje WebSocket:",a)}}}catch(a){console.error("Error inicializando WebSocket:",a)}}disconnect(){this.socket&&(this.socket.close(),this.socket=null,this.connected=!1,this.listeners.clear(),console.log("ðŸ”Œ WebSocket desconectado manualmente"))}send(e,a){if(this.socket&&this.connected){const t=JSON.stringify({event:e,data:a});this.socket.send(t)}else console.warn("âš ï¸ WebSocket no conectado, no se puede enviar:",e)}on(e,a){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(a)}off(e,a){if(this.listeners.has(e)){const t=this.listeners.get(e),o=t.indexOf(a);o>-1&&t.splice(o,1)}}emit(e,a){this.listeners.has(e)&&this.listeners.get(e).forEach((t=>{try{t(a)}catch(o){console.error(`Error en listener para evento ${e}:`,o)}}))}notifyUploadStart(e){this.send("media-upload-start",e)}requestPlaybackStatus(){this.send("get-playback-status")}sendPlayerCommand(e,a={}){this.send("player-command",{command:e,...a})}notifyScheduleChange(e){this.send("schedule-change",e)}requestSystemStats(){this.send("get-system-stats")}}const le=new ne,se=()=>{le.connect()},ie=()=>{le.disconnect()},re=()=>le.connected,ce=()=>({connect:se,disconnect:ie,isConnected:re,on:(e,a)=>le.on(e,a),off:(e,a)=>le.off(e,a),send:(e,a)=>le.send(e,a),notifyUploadStart:e=>le.notifyUploadStart(e),requestPlaybackStatus:()=>le.requestPlaybackStatus(),sendPlayerCommand:(e,a)=>le.sendPlayerCommand(e,a),notifyScheduleChange:e=>le.notifyScheduleChange(e),requestSystemStats:()=>le.requestSystemStats()});var de=t(891),ue={name:"PlayerView",components:{ThemeToggle:te.A},setup(){const e=(0,Z.rd)(),a=(0,ae.dj)(),{isDarkMode:n,loadTheme:l}=(0,oe.D)(),{backendBaseUrl:s,buildMediaUrl:i}=(0,de.f)(),r=(0,J.KR)(null),c=(0,J.KR)(!1),d=(0,J.KR)([]),u=(0,J.KR)(null),m=(0,J.KR)([]),p=(0,J.KR)(null),g=(0,J.KR)(0),v=(0,J.KR)(!1),h=(0,J.KR)(!1),f=(0,J.KR)(0),k=(0,J.KR)(null),y=(0,J.KR)("");let b=null,L=null,_=null;const F=(0,o.EW)((()=>{if(!p.value)return 0;const e=q();return e>0?f.value/e:0})),C=(0,o.EW)((()=>y.value||"")),{connect:w,disconnect:E,on:S,off:P}=ce(),x=async({id:e})=>{u.value&&(await z(u.value.id),a.info("Se aÃ±adiÃ³ un nuevo medio a la playlist"))},M=async({playlist_id:e,action:t,media_id:o})=>{if(!u.value||u.value.id!==e)return;console.log(`Playlist actualizada: ${t}`);const n=m.value.length;await z(e);const l=m.value.length;switch("media_removed"===t&&l<n&&g.value>=l&&l>0&&(g.value=0,U()),t){case"media_added":a.info("Se aÃ±adiÃ³ un medio a la playlist activa");break;case"media_removed":a.warning("Se removiÃ³ un medio de la playlist activa");break;case"playlist_modified":a.info("La playlist activa fue modificada");break}},I=()=>{try{w(),S("media_created",x),S("playlist_updated",M),console.log("WebSocket conectado exitosamente")}catch(e){console.warn("WebSocket no disponible, continuando sin actualizaciones automÃ¡ticas:",e)}},A=()=>{try{P("media_created",x),P("playlist_updated",M),E(),console.log("WebSocket desconectado exitosamente")}catch(e){console.warn("Error al desconectar WebSocket:",e)}},D=e=>{const a=Math.floor(e/60),t=Math.floor(e%60);return`${a}:${t.toString().padStart(2,"0")}`},$=e=>{if(!e)return"0:00";const a=Math.floor(e/3600),t=Math.floor(e%3600/60),o=e%60;return a>0?`${a}:${t.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:`${t}:${o.toString().padStart(2,"0")}`},q=()=>p.value?p.value.effective_duration||p.value.duration||5:0,T=(Y.getMediaUrl,async()=>{c.value=!0;try{console.log("Intentando cargar playlists...");const e=await Y.ek.listPlaylists();d.value=e.data||[],console.log("Playlists cargadas exitosamente:",d.value)}catch(t){console.error("Error fetching playlists:",t),401===t.response?.status?(a.error("SesiÃ³n expirada. Redirigiendo al login..."),localStorage.removeItem("signance_token"),e.push("/login")):a.error("Error al cargar las playlists")}finally{c.value=!1}}),z=async e=>{try{console.log("Cargando medios de playlist:",e);const t=await Y.ek.getPlaylist(e),o=t.data||{},n=o.medias||[];if(!Array.isArray(n))return console.error("La respuesta no contiene un array de medias:",o),m.value=[],void a.error("Error: formato de datos incorrecto");m.value=n.map((e=>({...e,effective_duration:e.duration,url:e.file_url}))),console.log("Medios de playlist cargados:",{count:m.value.length,playlist_name:o.name,items:n.map((e=>({id:e.id,filename:e.filename,duration:e.duration,file_url:e.file_url})))}),m.value.length>0?(g.value=0,U()):(console.warn("No se encontraron medios en la playlist"),a.warning("Esta playlist no contiene medios"))}catch(t){console.error("Error loading playlist media:",t),m.value=[],a.error("Error al cargar los medios de la playlist")}},U=()=>{if(m.value.length>0){const e=m.value[g.value];p.value=e,f.value=0,y.value=e.url||"",console.log("Medio actual cargado:",{index:g.value,filename:e.filename,media_type:e.media_type,filepath:e.filepath,duration:e.duration,effective_duration:e.effective_duration,url:e.url})}else console.warn("No hay medios disponibles para cargar"),p.value=null,y.value=""},R=async e=>{u.value=e,await z(e.id),m.value.length>0?(B(),a.success(`Reproduciendo: ${e.name}`)):a.warning("Esta playlist no tiene medios para reproducir")},B=()=>{v.value=!0,V(),te(),H()},V=()=>{if(!p.value)return;const e=q();console.log(`Programando cambio de medio en ${e} segundos`),clearTimeout(b),b=setTimeout((()=>{v.value&&N()}),1e3*e)},N=()=>{0!==m.value.length&&(g.value=(g.value+1)%m.value.length,U(),v.value&&V())},X=()=>{0!==m.value.length&&(g.value=0===g.value?m.value.length-1:g.value-1,U(),v.value&&V())},W=()=>{v.value?K():O()},K=()=>{v.value=!1,clearTimeout(b),clearInterval(_),"video"===p.value?.media_type&&r.value&&r.value.pause(),a.info("ReproducciÃ³n pausada")},O=()=>{v.value=!0,V(),te(),"video"===p.value?.media_type&&r.value&&r.value.play(),a.info("ReproducciÃ³n reanudada")},Q=()=>{v.value=!1,clearTimeout(b),clearInterval(_),clearInterval(L),u.value=null,p.value=null,m.value=[],k.value=null,f.value=0,a.info("ReproducciÃ³n detenida")},j=()=>{N(),v.value&&V()},G=()=>{X(),v.value&&V()},H=()=>{console.log("Schedule check temporalmente deshabilitado")},te=()=>{clearInterval(_),_=setInterval((()=>{v.value&&p.value&&(f.value+=.1,"video"===p.value.media_type&&r.value&&r.value.ended&&ne())}),100)},ne=()=>{console.log("Medio terminado, avanzando al siguiente"),N()},le=()=>{console.log("Medio cargado exitosamente:",p.value?.filename)},se=async e=>{console.error("Error de medio:",{error:e,media:p.value,url:y.value});try{const e=(await Promise.resolve().then(t.bind(t,349))).default,a=await e.detectBackend();console.log("ðŸ” Backend detectado:",a);const{getMediaUrl:n}=await Promise.resolve().then(t.bind(t,442)),l=await n(p.value);console.log("ðŸ” URL construida por getMediaUrl:",l);const s=`${a.baseUrl}/uploads/${p.value?.served_filename||p.value?.filename}`;console.log("ðŸ” URL de prueba directa:",s);try{const e=await fetch(s,{method:"HEAD"});console.log("ðŸ” Respuesta del servidor para archivo:",e.status,e.statusText)}catch(o){console.error("ðŸ” Error al acceder al archivo:",o)}}catch(n){console.error("ðŸ” Error en debug:",n)}a.error(`Error al cargar: ${p.value?.filename||"medio desconocido"}`),setTimeout((()=>{m.value.length>1?(console.log("Saltando al siguiente medio debido a error"),N()):(console.log("No hay mÃ¡s medios disponibles"),a.warning("No hay mÃ¡s medios disponibles en la playlist"))}),2e3)},ie=()=>{h.value=!h.value},re=async()=>{if(!p.value)return console.warn("No hay medio actual para debuggear"),void a.warning("No hay medio actual para debuggear");console.log("ðŸ› === DEBUG INFORMACIÃ“N DEL MEDIO ==="),console.log("ðŸ› Medio actual:",p.value),console.log("ðŸ› URL actual:",y.value);try{const o=(await Promise.resolve().then(t.bind(t,349))).default,n=await o.detectBackend();console.log("ðŸ› Backend detectado:",n);const{getMediaUrl:l}=await Promise.resolve().then(t.bind(t,442)),s=await l(p.value);console.log("ðŸ› URL construida por getMediaUrl:",s);const i=[`${n.baseUrl}/uploads/${p.value.served_filename}`,`${n.baseUrl}/uploads/${p.value.filename}`,`${n.baseUrl}${p.value.file_url}`,`${n.baseUrl}${p.value.filepath}`];console.log("ðŸ› Variaciones de URL a probar:",i);for(let a=0;a<i.length;a++){const t=i[a];if(t&&!t.includes("undefined"))try{const e=await fetch(t,{method:"HEAD"});console.log(`ðŸ› VariaciÃ³n ${a+1} (${t}):`,e.status,e.statusText)}catch(e){console.error(`ðŸ› VariaciÃ³n ${a+1} fallÃ³:`,e.message)}}a.info("InformaciÃ³n de debug en la consola")}catch(o){console.error("ðŸ› Error en debug:",o),a.error("Error en debug - ver consola")}},ue=(0,J.KR)(!1),me=(0,J.KR)(!1),pe=(0,J.KR)(null);let ge=null;const ve=()=>{ue.value=!!document.fullscreenElement,console.log("Initialized fullscreen state:",ue.value)},he=async()=>{try{if(document.fullscreenElement)await document.exitFullscreen(),ue.value=!1,a.info("Modo pantalla completa desactivado");else{const e=document.querySelector(".player-state");e?await e.requestFullscreen():await document.documentElement.requestFullscreen(),ue.value=!0,a.info("Modo pantalla completa activado")}}catch(e){console.error("Error toggle fullscreen:",e),a.error("Error al cambiar modo de pantalla")}},fe=()=>{const e=ue.value;ue.value=!!document.fullscreenElement,console.log("Fullscreen state changed:",{wasFullscreen:e,nowFullscreen:ue.value,element:document.fullscreenElement}),ue.value||(me.value=!1,ge&&(clearTimeout(ge),ge=null)),ye(!0)},ke=()=>{ue.value&&(me.value=!0,ye(!0),ge&&clearTimeout(ge),ge=setTimeout((()=>{me.value=!1,ye(!1)}),3e3))},ye=e=>{const a=document.querySelector(".player-container");a&&(ue.value?e?(a.classList.remove("hide-cursor"),document.body.style.cursor="default"):(a.classList.add("hide-cursor"),document.body.style.cursor="none"):(a.classList.remove("hide-cursor"),document.body.style.cursor="default"))},be=()=>{k.value=null},Le=()=>{e.push("/admin")},_e=async()=>{try{let t;console.log("ðŸ” Intentando cargar logo del negocio...");try{const e=await ee["default"].detectBackend();t=e.baseUrl,console.log("ðŸ“¡ Backend detectado para logo:",t)}catch(e){return void console.log("âŒ Error detectando backend para logo:",e)}const o=`${t}/api/business/logo`;console.log("ðŸ–¼ï¸ Intentando cargar logo desde:",o);try{const e=await fetch(o,{method:"GET"});if(console.log("ðŸ“¥ Respuesta del logo:",e.status,e.statusText),e.ok){const a=await e.json();console.log("ðŸ“„ Datos recibidos:",a.logo?"Logo base64 presente":"Sin logo"),a.logo?(pe.value=`data:image/png;base64,${a.logo}`,console.log("âœ… Logo cargado exitosamente como data URL")):(console.log("âŒ No hay datos de logo en la respuesta"),pe.value=null)}else 404===e.status?(console.log("ðŸ“„ No hay logo configurado (404)"),pe.value=null):(console.log("âŒ Error cargando logo:",e.status,e.statusText),pe.value=null)}catch(a){console.log("âŒ Error de red cargando logo:",a),pe.value=null}}catch(t){console.log("âŒ Error general cargando logo:",t),pe.value=null}},Fe=()=>{Q(),e.push("/")};return(0,o.sV)((()=>{console.log("PlayerView mounted, initial fullscreen state:",ue.value),l(),ve(),T(),setTimeout((()=>{_e()}),1e3),document.addEventListener("fullscreenchange",fe),I()})),(0,o.hi)((()=>{clearTimeout(b),clearInterval(_),clearInterval(L),ge&&clearTimeout(ge),document.removeEventListener("fullscreenchange",fe),A()})),{loading:c,playlists:d,selectedPlaylist:u,playlistMedia:m,currentMedia:p,currentMediaIndex:g,isPlaying:v,showInfo:h,elapsedTime:f,scheduleOverride:k,progress:F,currentMediaSrc:C,videoPlayer:r,isFullscreen:ue,showFullscreenControls:me,businessLogo:pe,fetchPlaylists:T,selectPlaylist:R,togglePlayPause:W,skipToNext:j,skipToPrevious:G,stopPlayback:Q,toggleInfo:ie,debugCurrentMedia:re,toggleFullscreen:he,dismissScheduleNotification:be,goToAdmin:Le,goBack:Fe,onMediaEnded:ne,onMediaLoaded:le,handleMediaError:se,formatTime:D,formatTotalDuration:$,getCurrentDuration:q,initializeFullscreenState:ve,onMouseMoveFullscreen:ke,setCursorVisibility:ye,isDarkMode:n}}},me=t(262);const pe=(0,me.A)(ue,[["render",H],["__scopeId","data-v-c13ecb28"]]);var ge=pe},600:function(e,a,t){t.r(a),t.d(a,{default:function(){return V}});var o=t(641),n=t(33),l=t(751);const s={class:"config-container"},i={class:"theme-toggle-container"},r={key:0,class:"loading-overlay"},c={key:1,class:"config-content"},d={class:"config-card"},u={class:"config-header"},m={class:"header-content"},p={class:"logo-container"},g={class:"page-title"},v={class:"page-subtitle"},h={key:0,class:"status-badge"},f={class:"config-form-section"},k={class:"input-group"},y={class:"input-group"},b={class:"logo-upload-section"},L={class:"logo-upload-header"},_={key:0,class:"current-logo-preview"},F={class:"logo-preview-container"},C=["src"],w={key:1,class:"new-logo-preview"},E={class:"logo-preview-container"},S=["src"],P={class:"form-actions"},x={class:"footer-section"},M={class:"diversity-message"};function I(e,a,t,I,A,D){const $=(0,o.g2)("ThemeToggle"),q=(0,o.g2)("q-spinner-dots"),T=(0,o.g2)("q-icon"),z=(0,o.g2)("q-input"),U=(0,o.g2)("q-btn"),R=(0,o.g2)("q-file"),B=(0,o.g2)("q-form");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("div",i,[(0,o.bF)($)]),I.initialLoading?((0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(q,{size:"3rem"}),a[2]||(a[2]=(0,o.Lk)("p",null,"Cargando configuraciÃ³n...",-1))])):((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",d,[(0,o.Lk)("div",u,[(0,o.Lk)("div",m,[(0,o.Lk)("div",p,[(0,o.bF)(T,{name:"business",class:"main-logo"}),a[3]||(a[3]=(0,o.Lk)("div",{class:"logo-glow"},null,-1))]),(0,o.Lk)("h2",g,(0,n.v_)(I.isUpdate?"Actualizar Negocio":"Configurar Negocio"),1),(0,o.Lk)("p",v,(0,n.v_)(I.isUpdate?"Modifica la informaciÃ³n de tu negocio":"Configura tu espacio LGBT+ friendly"),1),a[5]||(a[5]=(0,o.Lk)("div",{class:"pride-divider"},null,-1)),I.isUpdate?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.bF)(T,{name:"check_circle"}),a[4]||(a[4]=(0,o.Lk)("span",null,"Negocio ya configurado",-1))])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",f,[(0,o.bF)(B,{onSubmit:(0,l.D$)(I.save,["prevent"]),class:"config-form"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",k,[(0,o.bF)(z,{modelValue:I.form.name,"onUpdate:modelValue":a[0]||(a[0]=e=>I.form.name=e),label:"Nombre del negocio",outlined:"",dense:"",required:"",class:"modern-input",rules:[e=>!!e||"El nombre es requerido"]},{prepend:(0,o.k6)((()=>[(0,o.bF)(T,{name:"store",class:"input-icon"})])),_:1},8,["modelValue","rules"])]),(0,o.Lk)("div",y,[(0,o.Lk)("div",b,[(0,o.Lk)("div",L,[(0,o.bF)(T,{name:"image",class:"input-icon"}),a[6]||(a[6]=(0,o.Lk)("span",null,"Logo del negocio",-1))]),I.currentLogoPreview?((0,o.uX)(),(0,o.CE)("div",_,[a[7]||(a[7]=(0,o.Lk)("div",{class:"preview-label"},"Logo actual:",-1)),(0,o.Lk)("div",F,[(0,o.Lk)("img",{src:I.currentLogoPreview,alt:"Logo actual",class:"logo-preview"},null,8,C),(0,o.bF)(U,{flat:"",round:"",icon:"close",size:"sm",onClick:I.clearCurrentLogo,class:"remove-logo-btn"},null,8,["onClick"])])])):(0,o.Q3)("",!0),(0,o.bF)(R,{modelValue:I.form.logo,"onUpdate:modelValue":[a[1]||(a[1]=e=>I.form.logo=e),I.onLogoSelected],label:"Subir nuevo logo (PNG, JPG, JPEG)",accept:"image/png,image/jpg,image/jpeg",outlined:"",dense:"",class:"modern-input","max-file-size":5242880},{prepend:(0,o.k6)((()=>[(0,o.bF)(T,{name:"upload"})])),_:1},8,["modelValue","onUpdate:modelValue"]),I.newLogoPreview?((0,o.uX)(),(0,o.CE)("div",w,[a[8]||(a[8]=(0,o.Lk)("div",{class:"preview-label"},"Nuevo logo:",-1)),(0,o.Lk)("div",E,[(0,o.Lk)("img",{src:I.newLogoPreview,alt:"Nuevo logo",class:"logo-preview"},null,8,S),(0,o.bF)(U,{flat:"",round:"",icon:"close",size:"sm",onClick:I.clearNewLogo,class:"remove-logo-btn"},null,8,["onClick"])])])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",P,[I.isUpdate?((0,o.uX)(),(0,o.Wv)(U,{key:0,flat:"",color:"grey",label:"Cancelar",onClick:I.goToAdmin,class:"cancel-btn"},null,8,["onClick"])):(0,o.Q3)("",!0),(0,o.bF)(U,{type:"submit",label:I.isUpdate?"Actualizar ConfiguraciÃ³n":"Guardar ConfiguraciÃ³n",class:"save-btn",size:"md",unelevated:"",loading:I.loading,disable:!I.form.name},null,8,["label","loading","disable"])])])),_:1},8,["onSubmit"])]),(0,o.Lk)("div",x,[(0,o.Lk)("div",M,[(0,o.bF)(T,{name:"favorite",class:"heart-icon"}),a[9]||(a[9]=(0,o.Lk)("span",null,"Programado por un gei ðŸ³ï¸â€ðŸŒˆ",-1))])])])]))])}var A=t(953),D=t(220),$=t(889),q=t(246),T=t(725),z=t(697),U={name:"ConfigView",components:{ThemeToggle:z.A},setup(){const e=(0,D.rd)(),a=(0,q.dj)(),{loadTheme:t}=(0,T.D)(),n=(0,A.KR)(!1),l=(0,A.KR)(!0),s=(0,A.KR)(!1),i=(0,A.KR)(null),r=(0,A.KR)(null),c=(0,A.KR)(null),d=(0,A.KR)({name:"",logo:null}),u=async()=>{try{const a=await $.ZK.get();if(a.data&&(i.value=a.data,d.value.name=a.data.name||"",s.value=!0,a.data.id))try{const e=await $.ZK.getLogo();e.data?.logo&&(r.value=`data:image/png;base64,${e.data.logo}`)}catch(e){console.log("No hay logo existente")}}catch(e){console.log("No hay negocio configurado, serÃ¡ creaciÃ³n"),s.value=!1}finally{l.value=!1}},m=e=>{if(e){const t=["image/png","image/jpeg","image/jpg"];if(!t.includes(e.type))return a.error("Solo se permiten archivos PNG, JPG o JPEG"),void(d.value.logo=null);if(e.size>5242880)return a.error("El archivo es muy grande. MÃ¡ximo 5MB."),void(d.value.logo=null);const o=new FileReader;o.onload=e=>{c.value=e.target.result},o.readAsDataURL(e)}else c.value=null},p=()=>{r.value=null,s.value&&a.info("El logo actual serÃ¡ eliminado al guardar")},g=()=>{d.value.logo=null,c.value=null},v=async()=>{if(d.value.name){n.value=!0;try{const t={name:d.value.name,logo:d.value.logo};let o;s.value?(o=await $.ZK.update(t),a.success("Â¡Negocio actualizado exitosamente!")):(o=await $.ZK.create(t),a.success("Â¡Negocio configurado exitosamente!")),s.value?e.push("/admin"):e.push("/login")}catch(t){const e=s.value?"Error actualizando la configuraciÃ³n del negocio":"Error guardando la configuraciÃ³n del negocio";a.error(e),console.error("Error:",t)}finally{n.value=!1}}else a.warning("Ingresa el nombre del negocio")},h=()=>{e.push("/admin")};return(0,o.sV)((async()=>{t(),await u()})),{form:d,save:v,loading:n,initialLoading:l,isUpdate:s,currentBusiness:i,currentLogoPreview:r,newLogoPreview:c,onLogoSelected:m,clearCurrentLogo:p,clearNewLogo:g,goToAdmin:h}}},R=t(262);const B=(0,R.A)(U,[["render",I],["__scopeId","data-v-e2c0c8dc"]]);var V=B},661:function(e,a,t){t.d(a,{A:function(){return D}});var o=t(641),n=t(33),l=t(751);const s={class:"media-uploader"},i={key:0,class:"upload-prompt"},r={class:"upload-icon"},c={class:"supported-formats"},d={key:1,class:"file-selected"},u={class:"file-preview"},m={key:0,class:"image-preview"},p=["src","alt"],g={key:1,class:"file-icon"},v={class:"file-details"},h={class:"file-meta"},f={class:"file-size"},k={key:2,class:"upload-progress"},y={class:"progress-circle"},b={class:"progress-text"},L={key:0,class:"metadata-form"},_={class:"form-section"},F={class:"form-grid"},C={class:"form-actions"},w={key:1,class:"success-message"};function E(e,a,t,E,S,P){const x=(0,o.g2)("q-icon"),M=(0,o.g2)("q-chip"),I=(0,o.g2)("q-btn"),A=(0,o.g2)("q-circular-progress"),D=(0,o.g2)("q-input"),$=(0,o.g2)("q-select");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("div",{class:(0,n.C4)(["upload-zone",{"drag-over":E.isDragOver,"has-file":E.selectedFile,uploading:E.isUploading}]),onDragover:a[1]||(a[1]=(0,l.D$)(((...e)=>E.handleDragOver&&E.handleDragOver(...e)),["prevent"])),onDragleave:a[2]||(a[2]=(0,l.D$)(((...e)=>E.handleDragLeave&&E.handleDragLeave(...e)),["prevent"])),onDrop:a[3]||(a[3]=(0,l.D$)(((...e)=>E.handleDrop&&E.handleDrop(...e)),["prevent"])),onClick:a[4]||(a[4]=(...e)=>E.triggerFileSelect&&E.triggerFileSelect(...e))},[(0,o.Lk)("input",{ref:"fileInput",type:"file",accept:"image/*,video/*",onChange:a[0]||(a[0]=(...e)=>E.handleFileSelect&&E.handleFileSelect(...e)),class:"hidden-input"},null,544),E.selectedFile||E.isUploading?E.selectedFile&&!E.isUploading?((0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("div",u,[E.previewUrl&&"image"===E.metadata.media_type?((0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("img",{src:E.previewUrl,alt:E.selectedFile.name},null,8,p)])):((0,o.uX)(),(0,o.CE)("div",g,[(0,o.bF)(x,{name:E.getFileIcon(E.selectedFile.type),size:"3rem"},null,8,["name"])]))]),(0,o.Lk)("div",v,[(0,o.Lk)("h4",null,(0,n.v_)(E.selectedFile.name),1),(0,o.Lk)("div",h,[(0,o.bF)(M,{size:"sm",color:E.getTypeColor(E.metadata.media_type),"text-color":"white"},{default:(0,o.k6)((()=>[(0,o.eW)((0,n.v_)(E.metadata.media_type?.toUpperCase()||"ARCHIVO"),1)])),_:1},8,["color"]),(0,o.Lk)("span",f,(0,n.v_)(E.formatFileSize(E.selectedFile.size)),1)])]),(0,o.bF)(I,{round:"",flat:"",icon:"close",onClick:(0,l.D$)(E.resetForm,["stop"]),class:"remove-file",size:"sm"},null,8,["onClick"])])):E.isUploading?((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("div",y,[(0,o.bF)(A,{value:E.uploadProgress.percent,size:"60px",thickness:.2,color:"primary","track-color":"grey-3",class:"q-ma-md"},null,8,["value"]),(0,o.Lk)("div",b,(0,n.v_)(Math.round(E.uploadProgress.percent))+"% ",1)]),(0,o.Lk)("h4",null,(0,n.v_)(E.uploadProgress.message),1),(0,o.Lk)("p",null,(0,n.v_)(E.selectedFile?.name),1)])):(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("div",r,[(0,o.bF)(x,{name:"cloud_upload",size:"3rem"})]),a[12]||(a[12]=(0,o.Lk)("h4",null,"Arrastra archivos aquÃ­",-1)),a[13]||(a[13]=(0,o.Lk)("p",null,"o haz clic para seleccionar",-1)),(0,o.Lk)("div",c,[(0,o.bF)(M,{size:"sm",color:"primary","text-color":"white"},{default:(0,o.k6)((()=>a[8]||(a[8]=[(0,o.eW)("JPG")]))),_:1,__:[8]}),(0,o.bF)(M,{size:"sm",color:"primary","text-color":"white"},{default:(0,o.k6)((()=>a[9]||(a[9]=[(0,o.eW)("PNG")]))),_:1,__:[9]}),(0,o.bF)(M,{size:"sm",color:"secondary","text-color":"white"},{default:(0,o.k6)((()=>a[10]||(a[10]=[(0,o.eW)("MP4")]))),_:1,__:[10]}),(0,o.bF)(M,{size:"sm",color:"secondary","text-color":"white"},{default:(0,o.k6)((()=>a[11]||(a[11]=[(0,o.eW)("WebM")]))),_:1,__:[11]})]),a[14]||(a[14]=(0,o.Lk)("div",{class:"size-limit"},"MÃ¡ximo 100MB",-1))]))],34),E.selectedFile&&!E.isUploading?((0,o.uX)(),(0,o.CE)("div",L,[(0,o.Lk)("div",_,[a[15]||(a[15]=(0,o.Lk)("h5",null,"Detalles del archivo",-1)),(0,o.Lk)("div",F,[(0,o.bF)(D,{modelValue:E.metadata.filename,"onUpdate:modelValue":a[5]||(a[5]=e=>E.metadata.filename=e),label:"Nombre del archivo",outlined:"",class:"filename-input",rules:[e=>!!e||"El nombre es requerido"]},{prepend:(0,o.k6)((()=>[(0,o.bF)(x,{name:"edit"})])),_:1},8,["modelValue","rules"]),(0,o.bF)($,{modelValue:E.metadata.media_type,"onUpdate:modelValue":a[6]||(a[6]=e=>E.metadata.media_type=e),options:E.mediaTypeOptions,label:"Tipo de contenido",outlined:"","emit-value":"","map-options":"",rules:[e=>!!e||"Selecciona el tipo"]},{prepend:(0,o.k6)((()=>[(0,o.bF)(x,{name:"category"})])),_:1},8,["modelValue","options","rules"]),(0,o.bF)(D,{modelValue:E.metadata.duration,"onUpdate:modelValue":a[7]||(a[7]=e=>E.metadata.duration=e),modelModifiers:{number:!0},label:"DuraciÃ³n (segundos)",type:"number",outlined:"",hint:"image"===E.metadata.media_type?"Para imÃ¡genes: tiempo de visualizaciÃ³n":"Se detectarÃ¡ automÃ¡ticamente para videos"},{prepend:(0,o.k6)((()=>[(0,o.bF)(x,{name:"schedule"})])),_:1},8,["modelValue","hint"])])]),(0,o.Lk)("div",C,[(0,o.bF)(I,{label:"Cancelar",color:"grey-7",flat:"",onClick:E.resetForm,disable:E.isUploading,class:"cancel-btn"},null,8,["onClick","disable"]),(0,o.bF)(I,{label:"Subir archivo",color:"primary",unelevated:"",onClick:E.uploadFile,loading:E.isUploading,disable:!E.isFormValid,class:"upload-btn"},{loading:(0,o.k6)((()=>a[16]||(a[16]=[(0,o.eW)(" Subiendo... ")]))),_:1},8,["onClick","loading","disable"])])])):(0,o.Q3)("",!0),E.uploadSuccess?((0,o.uX)(),(0,o.CE)("div",w,[(0,o.bF)(x,{name:"check_circle",size:"2rem",color:"positive"}),a[17]||(a[17]=(0,o.Lk)("h4",null,"Â¡Archivo subido correctamente!",-1)),(0,o.Lk)("p",null,(0,n.v_)(E.uploadedFileName)+" estÃ¡ listo para usar",1)])):(0,o.Q3)("",!0)])}var S=t(953),P=t(246),x=t(889),M={name:"MediaUploader",emits:["upload-complete","upload-error","uploaded"],setup(e,{emit:a}){const t=(0,P.dj)(),n=(0,S.KR)(null),l=(0,S.KR)(null),s=(0,S.KR)(!1),i=(0,S.KR)(!1),r=(0,S.KR)(null),c=(0,S.KR)(!1),d=(0,S.KR)(""),u=(0,S.Kh)({filename:"",media_type:"",duration:5}),m=(0,S.Kh)({show:!1,percent:0,message:""}),p=[{label:"Imagen",value:"image"},{label:"Video",value:"video"}],g=(0,o.EW)((()=>l.value&&u.filename.trim()&&u.media_type&&u.duration>0)),v=()=>{s.value||n.value?.click()},h=e=>{const a=e.target.files?.[0]||e;a&&a instanceof File&&f(a)},f=e=>{e.size>104857600?t.error("El archivo es demasiado grande. MÃ¡ximo 100MB."):e.type.startsWith("image/")||e.type.startsWith("video/")?(l.value=e,u.filename=e.name.replace(/\.[^/.]+$/,""),e.type.startsWith("image/")?(u.media_type="image",u.duration=5,k(e)):e.type.startsWith("video/")&&(u.media_type="video",u.duration=30,r.value=null),c.value=!1):t.error("Tipo de archivo no soportado. Solo imÃ¡genes y videos.")},k=e=>{const a=new FileReader;a.onload=e=>{r.value=e.target.result},a.readAsDataURL(e)},y=e=>{e.preventDefault(),i.value=!0},b=e=>{e.preventDefault(),i.value=!1},L=e=>{e.preventDefault(),i.value=!1;const a=e.dataTransfer.files;a.length>0&&f(a[0])},_=e=>e?e.startsWith("image/")?"image":e.startsWith("video/")?"videocam":"description":"description",F=e=>{switch(e){case"image":return"orange";case"video":return"purple";default:return"grey"}},C=e=>{if(0===e)return"0 Bytes";const a=1024,t=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,o)).toFixed(2))+" "+t[o]},w=async()=>{if(g.value){s.value=!0,m.show=!0,m.percent=0,m.message="Preparando subida...";try{const e=setInterval((()=>{m.percent<85&&(m.percent+=15*Math.random(),m.percent<30?m.message="Analizando archivo...":m.percent<60?m.message="Subiendo archivo...":m.message="Procesando multimedia...")}),300),o={file:l.value,filename:u.filename,media_type:u.media_type,duration:u.duration},n=await x.DX.upload(o);clearInterval(e),m.percent=100,m.message="Â¡Completado!",d.value=u.filename,c.value=!0,t.success(`âœ… ${u.filename} subido correctamente`),a("upload-complete",n.data),a("uploaded",n.data),setTimeout((()=>{E()}),3e3)}catch(e){console.error("Error subiendo archivo:",e),(0,x.vH)(e,t),a("upload-error",e),m.message="Error en la subida"}finally{s.value=!1,setTimeout((()=>{m.show=!1}),2e3)}}else t.warning("Completa todos los campos requeridos")},E=()=>{l.value=null,u.filename="",u.media_type="",u.duration=5,r.value=null,m.show=!1,m.percent=0,c.value=!1,d.value="",i.value=!1,n.value&&(n.value.value="")};return{fileInput:n,selectedFile:l,metadata:u,isUploading:s,isDragOver:i,previewUrl:r,uploadProgress:m,uploadSuccess:c,uploadedFileName:d,isFormValid:g,mediaTypeOptions:p,triggerFileSelect:v,handleFileSelect:h,handleDragOver:y,handleDragLeave:b,handleDrop:L,getFileIcon:_,getTypeColor:F,formatFileSize:C,uploadFile:w,resetForm:E}}},I=t(262);const A=(0,I.A)(M,[["render",E],["__scopeId","data-v-65b3c1cc"]]);var D=A},680:function(e,a,t){function o(){const e=window.location.origin,a=window.location.pathname.startsWith("/")&&!window.location.hostname.includes("localhost:8080");return console.log("ðŸ” Detectando contexto del frontend..."),console.log(`   ðŸ“ Origin: ${e}`),console.log(`   ðŸŒ Hostname: ${window.location.hostname}`),console.log(`   ðŸ“‚ Pathname: ${window.location.pathname}`),console.log(`   ðŸ”— Servido desde backend: ${a}`),a?(console.log("âœ… Frontend servido desde backend, usando mismo origen"),{baseUrl:e,port:parseInt(window.location.port)||("https:"===window.location.protocol?443:80),isProduction:!0}):(console.log("ðŸ”§ Modo desarrollo detectado, usando auto-detecciÃ³n"),null)}t.d(a,{w:function(){return o}})},697:function(e,a,t){t.d(a,{A:function(){return d}});var o=t(641),n=t(33);function l(e,a,t,l,s,i){const r=(0,o.g2)("q-btn");return(0,o.uX)(),(0,o.Wv)(r,{icon:l.isDarkMode?"wb_sunny":"nights_stay",onClick:l.toggleTheme,class:(0,n.C4)(l.themeToggleClass),flat:"",square:"",size:"md"},null,8,["icon","onClick","class"])}var s=t(725),i={name:"ThemeToggle",setup(){const{isDarkMode:e,toggleTheme:a}=(0,s.D)(),t=(0,o.EW)((()=>({"theme-toggle":!0,"theme-toggle--dark":e.value,"theme-toggle--light":!e.value})));return{isDarkMode:e,toggleTheme:a,themeToggleClass:t}}},r=t(262);const c=(0,r.A)(i,[["render",l],["__scopeId","data-v-410b47f5"]]);var d=c},714:function(e,a,t){t.d(a,{A:function(){return r}});var o=t(641),n=t(33);const l={class:"text-h6"};var s={__name:"EditMediaDialog",props:{modelValue:Boolean,media:Object,form:Object,loading:Boolean,isDark:Boolean},emits:["update:modelValue","save","close"],setup(e){return(a,t)=>{const s=(0,o.g2)("q-card-section"),i=(0,o.g2)("q-input"),r=(0,o.g2)("q-btn"),c=(0,o.g2)("q-card-actions"),d=(0,o.g2)("q-card"),u=(0,o.g2)("q-dialog");return(0,o.uX)(),(0,o.Wv)(u,{"model-value":e.modelValue,"onUpdate:modelValue":t[4]||(t[4]=e=>a.$emit("update:modelValue",e)),persistent:""},{default:(0,o.k6)((()=>[(0,o.bF)(d,{style:{"min-width":"800px","max-width":"1000px"},class:(0,n.C4)({"bg-dark text-white":e.isDark})},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",l,"Gestionar Medio - "+(0,n.v_)(e.media?.filename),1)])),_:1}),(0,o.bF)(s,{class:"q-pt-none"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{modelValue:e.form.filename,"onUpdate:modelValue":t[0]||(t[0]=a=>e.form.filename=a),label:"Nombre del archivo",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),(0,o.bF)(i,{modelValue:e.form.description,"onUpdate:modelValue":t[1]||(t[1]=a=>e.form.description=a),label:"DescripciÃ³n",type:"textarea",outlined:"",rows:"3"},null,8,["modelValue"])])),_:1}),(0,o.bF)(c,{align:"right"},{default:(0,o.k6)((()=>[(0,o.bF)(r,{flat:"",label:"Cancelar",onClick:t[2]||(t[2]=e=>a.$emit("close"))}),(0,o.bF)(r,{color:"primary",label:"Guardar",loading:e.loading,onClick:t[3]||(t[3]=e=>a.$emit("save"))},null,8,["loading"])])),_:1})])),_:1},8,["class"])])),_:1},8,["model-value"])}}};const i=s;var r=i},725:function(e,a,t){t.d(a,{D:function(){return m}});var o=t(953),n=t(641);const l=(0,o.KR)(!1),s=localStorage.getItem("signance-theme");l.value=s?"dark"===s:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;const i=e=>{const a=document.documentElement;e?(a.style.setProperty("--primary","#FFAA93"),a.style.setProperty("--primary-dark","#CC7A66"),a.style.setProperty("--primary-light","#FFCCB3"),a.style.setProperty("--secondary","#5A9DCB"),a.style.setProperty("--accent","#D1B05F"),a.style.setProperty("--background","#121212"),a.style.setProperty("--surface","#1E1E1E"),a.style.setProperty("--on-primary","#000000"),a.style.setProperty("--on-secondary","#FFFFFF"),a.style.setProperty("--text-primary","#E0E0E0"),a.style.setProperty("--text-secondary","#B0B0B0"),a.style.setProperty("--border","#2C2C2C"),a.style.setProperty("--error","#FF6F6F"),a.style.setProperty("--success","#66BB6A"),a.style.setProperty("--warning","#FFA726"),a.style.setProperty("--info","#42A5F5"),a.style.setProperty("--shadow-sm","0 1px 3px 0 rgba(0, 0, 0, 0.5)"),a.style.setProperty("--shadow-md","0 4px 6px -1px rgba(0, 0, 0, 0.4)"),a.style.setProperty("--shadow-lg","0 10px 15px -3px rgba(0, 0, 0, 0.4)"),a.style.setProperty("--shadow-xl","0 20px 25px -5px rgba(0, 0, 0, 0.5)")):(a.style.setProperty("--primary","#F0907B"),a.style.setProperty("--primary-dark","#D66E58"),a.style.setProperty("--primary-light","#FAC3B8"),a.style.setProperty("--secondary","#7BC5F0"),a.style.setProperty("--accent","#F0D27B"),a.style.setProperty("--background","#FFFFFF"),a.style.setProperty("--surface","#F5F5F5"),a.style.setProperty("--on-primary","#FFFFFF"),a.style.setProperty("--on-secondary","#FFFFFF"),a.style.setProperty("--text-primary","#212121"),a.style.setProperty("--text-secondary","#424242"),a.style.setProperty("--border","#E0E0E0"),a.style.setProperty("--error","#E53935"),a.style.setProperty("--success","#43A047"),a.style.setProperty("--warning","#FB8C00"),a.style.setProperty("--info","#1E88E5"),a.style.setProperty("--shadow-sm","0 1px 3px 0 rgba(0, 0, 0, 0.1)"),a.style.setProperty("--shadow-md","0 4px 6px -1px rgba(0, 0, 0, 0.1)"),a.style.setProperty("--shadow-lg","0 10px 15px -3px rgba(0, 0, 0, 0.1)"),a.style.setProperty("--shadow-xl","0 20px 25px -5px rgba(0, 0, 0, 0.1)"))},r=e=>{i(e),e?(document.documentElement.setAttribute("data-theme","dark"),document.body.style.backgroundColor="#121212",document.body.style.color="#E0E0E0",document.body.classList.add("dark-mode"),document.body.classList.remove("light-mode")):(document.documentElement.removeAttribute("data-theme"),document.body.style.backgroundColor="#FFFFFF",document.body.style.color="#212121",document.body.classList.add("light-mode"),document.body.classList.remove("dark-mode"))};r(l.value),(0,n.wB)(l,(e=>{localStorage.setItem("signance-theme",e?"dark":"light"),r(e)}));const c=(0,n.EW)((()=>({primaryColor:l.value?"#FFAA93":"#F0907B",primaryDark:l.value?"#CC7A66":"#D66E58",primaryLight:l.value?"#FFCCB3":"#FAC3B8",secondaryColor:l.value?"#5A9DCB":"#7BC5F0",accentColor:l.value?"#D1B05F":"#F0D27B",errorColor:l.value?"#FF6F6F":"#E53935",successColor:l.value?"#66BB6A":"#43A047",warningColor:l.value?"#FFA726":"#FB8C00",infoColor:l.value?"#42A5F5":"#1E88E5",backgroundColor:l.value?"#121212":"#FFFFFF",surfaceColor:l.value?"#1E1E1E":"#F5F5F5",cardColor:l.value?"#1E1E1E":"#FFFFFF",textPrimary:l.value?"#E0E0E0":"#212121",textSecondary:l.value?"#B0B0B0":"#424242",onPrimary:l.value?"#000000":"#FFFFFF",onSecondary:(l.value,"#FFFFFF"),borderColor:l.value?"#2C2C2C":"#E0E0E0",gradientPrimary:l.value?"linear-gradient(135deg, #FFAA93 0%, #CC7A66 100%)":"linear-gradient(135deg, #F0907B 0%, #D66E58 100%)",gradientSecondary:l.value?"linear-gradient(135deg, #5A9DCB 0%, #42A5F5 100%)":"linear-gradient(135deg, #7BC5F0 0%, #1E88E5 100%)",gradientAccent:l.value?"linear-gradient(135deg, #D1B05F 0%, #FFA726 100%)":"linear-gradient(135deg, #F0D27B 0%, #FB8C00 100%)",shadowSm:l.value?"0 1px 3px 0 rgba(0, 0, 0, 0.5)":"0 1px 3px 0 rgba(0, 0, 0, 0.1)",shadowMd:l.value?"0 4px 6px -1px rgba(0, 0, 0, 0.4)":"0 4px 6px -1px rgba(0, 0, 0, 0.1)",shadowLg:l.value?"0 10px 15px -3px rgba(0, 0, 0, 0.4)":"0 10px 15px -3px rgba(0, 0, 0, 0.1)",shadowXl:l.value?"0 20px 25px -5px rgba(0, 0, 0, 0.5)":"0 20px 25px -5px rgba(0, 0, 0, 0.1)",hoverColor:l.value?"#2C2C2C":"#F5F5F5",hoverPrimary:l.value?"rgba(255, 170, 147, 0.1)":"rgba(240, 144, 123, 0.1)",hoverSecondary:l.value?"rgba(90, 157, 203, 0.1)":"rgba(123, 197, 240, 0.1)"}))),d=()=>{l.value=!l.value},u=()=>{r(l.value)};function m(){return{isDarkMode:l,toggleTheme:d,loadTheme:u,themeVars:c}}},880:function(e,a,t){function o(){console.log("ðŸŽ¨ Inicializando Material Icons..."),n(),l(),setTimeout(s,1e3)}function n(){const e=document.querySelector('link[href*="fonts.googleapis.com"][href*="Material+Icons"]');if(!e){console.log("ðŸ“¥ Cargando Material Icons desde Google Fonts...");const e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap",e.onload=()=>{console.log("âœ… Material Icons cargado desde Google Fonts")},e.onerror=()=>{console.error("âŒ Error al cargar Material Icons desde Google Fonts")},document.head.appendChild(e)}}function l(){console.log("ðŸŽ¨ Aplicando CSS correctivo para iconos...");const e="\n    /* CorrecciÃ³n global para Material Icons sin interferir con tamaÃ±os */\n    .material-icons {\n      font-family: 'Material Icons' !important;\n      font-weight: normal !important;\n      font-style: normal !important;\n      line-height: 1 !important;\n      letter-spacing: normal !important;\n      text-transform: none !important;\n      display: inline-block !important;\n      white-space: nowrap !important;\n      word-wrap: normal !important;\n      direction: ltr !important;\n      font-feature-settings: 'liga' !important;\n      -webkit-font-feature-settings: 'liga' !important;\n      -webkit-font-smoothing: antialiased !important;\n      -moz-osx-font-smoothing: grayscale !important;\n    }\n    \n    /* CorrecciÃ³n especÃ­fica para Quasar Icons - mantener tamaÃ±os */\n    .q-icon {\n      font-family: 'Material Icons' !important;\n      font-feature-settings: 'liga' !important;\n      -webkit-font-feature-settings: 'liga' !important;\n      /* NO sobrescribir font-size, width, height - dejar que Quasar los maneje */\n    }\n    \n    /* CorrecciÃ³n para iconos que aparecen como texto */\n    .q-icon:not(.q-icon--svg) {\n      font-family: 'Material Icons' !important;\n    }\n  ",a=document.createElement("style");a.id="material-icons-fix",a.textContent=e,document.head.appendChild(a)}function s(){console.log("ðŸ” Verificando carga de iconos...");const e=document.createElement("i");e.className="material-icons",e.textContent="home",e.style.position="absolute",e.style.left="-9999px",e.style.fontSize="24px",document.body.appendChild(e),setTimeout((()=>{const a=e.getBoundingClientRect(),t=window.getComputedStyle(e);console.log("ðŸ“Š Resultados de verificaciÃ³n:",{width:a.width,height:a.height,fontFamily:t.fontFamily,fontSize:t.fontSize,rendered:a.width>0&&a.height>0}),a.width>0&&a.height>0?console.log("âœ… Material Icons cargado correctamente"):(console.warn("âš ï¸ Material Icons puede no estar cargando correctamente"),i()),document.body.removeChild(e)}),100)}function i(){console.log("ðŸ”§ Aplicando correcciÃ³n forzada de iconos...");const e=document.querySelectorAll(".q-icon");e.forEach(((e,a)=>{if(e.style.fontFamily='"Material Icons" !important',e.textContent&&e.textContent.length>0){console.warn("Icono "+a+' contiene texto: "'+e.textContent+'"');const t=e.textContent;e.innerHTML='<i class="material-icons">'+t+"</i>"}}))}function r(e){const a=document.createElement("i");return a.className="material-icons",a.textContent=e,a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a),new Promise((e=>{setTimeout((()=>{const t=a.getBoundingClientRect(),o=t.width>0&&t.height>0;document.body.removeChild(a),e(o)}),100)}))}function c(){return{fontsAPI:{available:!!document.fonts,size:document.fonts?document.fonts.size:"N/A",materialIconsCheck:document.fonts?document.fonts.check('1rem "Material Icons"'):"N/A"},stylesheets:Array.from(document.styleSheets).map((e=>{try{return{href:e.href,rules:e.cssRules?e.cssRules.length:"N/A"}}catch(a){return{href:e.href,error:"CORS restriction"}}})),materialIconsLinks:Array.from(document.querySelectorAll('link[href*="material-icons"], link[href*="Material+Icons"]')).map((e=>e.href))}}t.d(a,{HF:function(){return r},Yp:function(){return o},ZS:function(){return c}})},889:function(e,a,t){t.d(a,{DX:function(){return v},R2:function(){return g},X3:function(){return d},ZK:function(){return h},fP:function(){return k},gr:function(){return f},vH:function(){return y}});var o=t(335),n=t(246),l=t(349),s=t(680);let i=o.A.create({baseURL:"",timeout:15e3,headers:{"Content-Type":"application/json"}}),r=!1,c=null;const d=async()=>r?i:c||(c=(async()=>{try{console.log("ðŸš€ Inicializando API con detecciÃ³n mejorada...");const a=(0,s.w)();if(a)return console.log("ðŸŽ¯ Modo producciÃ³n detectado, usando mismo origen"),i.defaults.baseURL=`${a.baseUrl}/api`,console.log("ðŸ§ª Probando conectividad en modo producciÃ³n..."),await i.get("/health",{timeout:5e3}),r=!0,console.log(`âœ… API inicializada en modo producciÃ³n: ${a.baseUrl}`),i;console.log("ðŸ”§ Modo desarrollo detectado, usando auto-detecciÃ³n...");const t=l["default"].getCachedBackend();if(t){console.log(`ðŸ“¦ Usando backend desde cachÃ©: ${t.baseUrl}`),i.defaults.baseURL=`${t.baseUrl}/api`;try{const e=await l["default"].testPort(t.port);if(e)return r=!0,console.log("âœ… API inicializada correctamente con backend desde cachÃ©"),i;console.log("âŒ Backend cached no responde, detectando nuevamente..."),l["default"].clearCache()}catch(e){console.log("âŒ Error probando backend cached:",e.message),l["default"].clearCache()}}console.log("ðŸ” Detectando backend automÃ¡ticamente...");const{baseUrl:o}=await l["default"].detectBackend();return i.defaults.baseURL=`${o}/api`,console.log("ðŸ§ª Probando conectividad con el backend..."),await i.get("/health",{timeout:5e3}),r=!0,console.log(`âœ… API inicializada correctamente con backend: ${o}`),l["default"].startHealthCheck((()=>{console.log("âš ï¸ ConexiÃ³n con backend perdida, reintentando..."),r=!1,c=null})),i}catch(e){console.error("âŒ Error inicializando API:",e),console.log("ðŸ”„ Intentando fallback con localhost:8000..."),i.defaults.baseURL="http://127.0.0.1:8000/api";try{return await i.get("/health",{timeout:3e3}),console.log("âœ… API inicializada con fallback localhost:8000"),r=!0,i}catch(a){throw console.error("âŒ Fallback tambiÃ©n fallÃ³:",a),new Error("No se pudo conectar con el backend. Verifica que el servidor estÃ© ejecutÃ¡ndose.")}}})(),c),u=async()=>(r||await d(),i);i.interceptors.request.use((e=>{const a=localStorage.getItem("signance_token");return a&&(e.headers.Authorization=`Bearer ${a}`),e}),(e=>Promise.reject(e))),i.interceptors.response.use((e=>e),(e=>{const a=(0,n.dj)();if(e.response){const t=e.response.status,o=e.response.data?.detail||"Error del servidor";switch(t){case 401:localStorage.removeItem("signance_token"),a.error("SesiÃ³n expirada. Por favor inicia sesiÃ³n nuevamente."),window.location.href="/login";break;case 403:a.error("No tienes permisos para realizar esta acciÃ³n");break;case 404:a.error("Recurso no encontrado");break;case 500:a.error("Error interno del servidor");break;default:a.error(o)}}else e.request?a.error("No se puede conectar con el servidor"):a.error("Error en la solicitud");return Promise.reject(e)}));const m=e=>async(...a)=>{const t=await u();return t[e](...a)},p={get:m("get"),post:m("post"),put:m("put"),delete:m("delete"),patch:m("patch")},g={checkSetup:()=>p.get("/auth/check-setup"),setupAdmin:e=>p.post("/auth/setup-admin",e),login:async e=>{const a=new FormData;a.append("username",e.username),a.append("password",e.password);const t=await u();return t.post("/auth/login",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},logout:()=>p.post("/auth/logout"),getCurrentUser:()=>p.get("/auth/me"),testProtected:()=>p.get("/auth/protected")},v={list:(e=0,a=100)=>p.get(`/media/?skip=${e}&limit=${a}`),get:e=>p.get(`/media/${e}`),upload:async e=>{const a=new FormData;a.append("file",e.file),a.append("filename",e.filename),a.append("media_type",e.media_type),a.append("duration",e.duration);const t=await u();return t.post("/media/",a,{headers:{"Content-Type":"multipart/form-data"}})},update:(e,a)=>p.put(`/media/${e}`,a),delete:e=>p.delete(`/media/${e}`),getPlaylists:e=>p.get(`/media/${e}/playlists`)},h={get:()=>p.get("/business/"),checkSetup:()=>p.get("/business/check-setup"),create:async e=>{const a=new FormData;a.append("name",e.name),e.logo&&a.append("logo",e.logo);const t=await u();return t.post("/business/",a,{headers:{"Content-Type":"multipart/form-data"}})},update:async e=>{const a=new FormData;e.name&&a.append("name",e.name),e.logo&&a.append("logo",e.logo);const t=await u();return t.put("/business/",a,{headers:{"Content-Type":"multipart/form-data"}})},getLogo:()=>p.get("/business/logo"),delete:()=>p.delete("/business/")},f={list:(e=0,a=100)=>p.get(`/schedules/?skip=${e}&limit=${a}`),get:e=>p.get(`/schedules/${e}`),getByMedia:e=>p.get(`/schedules/media/${e}`),getActive:(e=null)=>{const a=e?`/schedules/schedules/active?schedule_type=${e}`:"/schedules/schedules/active";return p.get(a)},create:e=>p.post("/schedules/",e),update:(e,a)=>p.put(`/schedules/${e}`,a),delete:e=>p.delete(`/schedules/${e}`)},k={list:(e=0,a=100)=>p.get(`/playlists/?skip=${e}&limit=${a}`),get:e=>p.get(`/playlists/${e}`),getStats:()=>p.get("/playlists/stats"),create:e=>p.post("/playlists/",e),update:(e,a)=>p.put(`/playlists/${e}`,a),delete:e=>p.delete(`/playlists/${e}`),addMedia:(e,a)=>p.post(`/playlists/${e}/media`,{media_ids:a}),addSingleMedia:(e,a)=>p.post(`/playlists/${e}/media`,a),removeMedia:(e,a)=>p.delete(`/playlists/${e}/media/${a}`),updateMedia:(e,a,t)=>p.put(`/playlists/${e}/media/${a}`,t),reorder:(e,a)=>p.put(`/playlists/${e}/reorder`,{media_orders:a}),getMedia:e=>p.get(`/playlists/${e}`)},y=(e,a)=>{413===e.response?.status?a.error("El archivo es demasiado grande"):415===e.response?.status?a.error("Tipo de archivo no soportado"):a.error("Error al procesar el archivo")}},891:function(e,a,t){t.d(a,{f:function(){return l}});var o=t(953),n=t(349);function l(){const e=(0,o.KR)(""),a=async()=>{try{const{baseUrl:a}=await n["default"].detectBackend();e.value=a}catch(a){console.error("Error detectando backend:",a),e.value="http://127.0.0.1:8000"}},t=a=>{if(!a||!e.value)return"";if(a.file_url)return`${e.value}${a.file_url}`;const t=a.served_filename||a.filename;return t?`${e.value}/uploads/${t}`:(console.error("No se puede construir URL: falta file_url, served_filename y filename"),"")};return a(),{backendBaseUrl:e,buildMediaUrl:t,detectBackend:a}}}},a={};function t(o){var n=a[o];if(void 0!==n)return n.exports;var l=a[o]={exports:{}};return e[o].call(l.exports,l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(a,o,n,l){if(!o){var s=1/0;for(d=0;d<e.length;d++){o=e[d][0],n=e[d][1],l=e[d][2];for(var i=!0,r=0;r<o.length;r++)(!1&l||s>=l)&&Object.keys(t.O).every((function(e){return t.O[e](o[r])}))?o.splice(r--,1):(i=!1,l<s&&(s=l));if(i){e.splice(d--,1);var c=n();void 0!==c&&(a=c)}}return a}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[o,n,l]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(a,o){return t.f[o](e,a),a}),[]))}}(),function(){t.u=function(e){return"js/"+e+"."+{289:"3e9580c5",403:"08a85daf",650:"645265dc",935:"98ac9301",941:"ea9f767e",990:"fc4bd100"}[e]+".js"}}(),function(){t.miniCssF=function(e){return"css/"+e+"."+{289:"2facc57a",403:"3a0e73e2",650:"e20c89da",935:"e475adb7",941:"b79bc63a",990:"ac9bc180"}[e]+".css"}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={},a="signance-frontend:";t.l=function(o,n,l,s){if(e[o])e[o].push(n);else{var i,r;if(void 0!==l)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==a+l){i=u;break}}i||(r=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,t.nc&&i.setAttribute("nonce",t.nc),i.setAttribute("data-webpack",a+l),i.src=o),e[o]=[n];var m=function(a,t){i.onerror=i.onload=null,clearTimeout(p);var n=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((function(e){return e(t)})),a)return a(t)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),r&&document.head.appendChild(i)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,a,o,n,l){var s=document.createElement("link");s.rel="stylesheet",s.type="text/css",t.nc&&(s.nonce=t.nc);var i=function(t){if(s.onerror=s.onload=null,"load"===t.type)n();else{var o=t&&t.type,i=t&&t.target&&t.target.href||a,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+i+")");r.name="ChunkLoadError",r.code="CSS_CHUNK_LOAD_FAILED",r.type=o,r.request=i,s.parentNode&&s.parentNode.removeChild(s),l(r)}};return s.onerror=s.onload=i,s.href=a,o?o.parentNode.insertBefore(s,o.nextSibling):document.head.appendChild(s),s},a=function(e,a){for(var t=document.getElementsByTagName("link"),o=0;o<t.length;o++){var n=t[o],l=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(l===e||l===a))return n}var s=document.getElementsByTagName("style");for(o=0;o<s.length;o++){n=s[o],l=n.getAttribute("data-href");if(l===e||l===a)return n}},o=function(o){return new Promise((function(n,l){var s=t.miniCssF(o),i=t.p+s;if(a(s,i))return n();e(o,i,null,n,l)}))},n={524:0};t.f.miniCss=function(e,a){var t={289:1,403:1,650:1,935:1,941:1,990:1};n[e]?a.push(n[e]):0!==n[e]&&t[e]&&a.push(n[e]=o(e).then((function(){n[e]=0}),(function(a){throw delete n[e],a})))}}}(),function(){var e={524:0};t.f.j=function(a,o){var n=t.o(e,a)?e[a]:void 0;if(0!==n)if(n)o.push(n[2]);else{var l=new Promise((function(t,o){n=e[a]=[t,o]}));o.push(n[2]=l);var s=t.p+t.u(a),i=new Error,r=function(o){if(t.o(e,a)&&(n=e[a],0!==n&&(e[a]=void 0),n)){var l=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;i.message="Loading chunk "+a+" failed.\n("+l+": "+s+")",i.name="ChunkLoadError",i.type=l,i.request=s,n[1](i)}};t.l(s,r,"chunk-"+a,a)}},t.O.j=function(a){return 0===e[a]};var a=function(a,o){var n,l,s=o[0],i=o[1],r=o[2],c=0;if(s.some((function(a){return 0!==e[a]}))){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(r)var d=r(t)}for(a&&a(o);c<s.length;c++)l=s[c],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(d)},o=self["webpackChunksignance_frontend"]=self["webpackChunksignance_frontend"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(170)}));o=t.O(o)})();
//# sourceMappingURL=app.ccdce167.js.map