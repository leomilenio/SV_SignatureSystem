"use strict";(self["webpackChunksignance_frontend"]=self["webpackChunksignance_frontend"]||[]).push([[403],{403:function(e,a,o){o.r(a),o.d(a,{default:function(){return A}});var l=o(641);const i={class:"media-manager"},r={class:"manager-header"},d={class:"header-content"},n={class:"header-info"},t={class:"header-actions"},c={class:"manager-content"},s={class:"upload-section"},u={class:"section-title"},m={class:"gallery-section"};function g(e,a,o,g,h,v){const b=(0,l.g2)("ThemeToggle"),p=(0,l.g2)("q-icon"),k=(0,l.g2)("q-btn"),M=(0,l.g2)("MediaUploader"),E=(0,l.g2)("MediaGallery"),f=(0,l.g2)("EditMediaDialog");return(0,l.uX)(),(0,l.CE)("div",i,[(0,l.bF)(b,{class:"theme-toggle"}),(0,l.Lk)("div",r,[(0,l.Lk)("div",d,[(0,l.Lk)("div",n,[(0,l.Lk)("h1",null,[(0,l.bF)(p,{name:"perm_media",class:"header-icon"}),a[3]||(a[3]=(0,l.eW)(" GestiÃ³n de Medios "))]),a[4]||(a[4]=(0,l.Lk)("p",null,"Administra tu biblioteca multimedia completa",-1))]),(0,l.Lk)("div",t,[(0,l.bF)(k,{label:"Volver al Admin",icon:"arrow_back",color:"white",unelevated:"",class:"back-btn",onClick:a[0]||(a[0]=a=>e.$router.push("/admin"))})])])]),(0,l.Lk)("div",c,[(0,l.Lk)("div",s,[(0,l.Lk)("div",u,[(0,l.Lk)("h3",null,[(0,l.bF)(p,{name:"cloud_upload"}),a[5]||(a[5]=(0,l.eW)(" Subir Nuevo Contenido "))])]),(0,l.bF)(M,{onUploadComplete:g.handleUploadComplete,onUploadError:g.handleUploadError},null,8,["onUploadComplete","onUploadError"])]),(0,l.Lk)("div",m,[(0,l.bF)(E,{"media-files":g.mediaFiles,"backend-base-url":g.backendBaseUrl,loading:g.mediaLoading,mode:"full",title:"Biblioteca Multimedia",subtitle:"Gestiona tu biblioteca completa",onRefresh:g.loadMedia,onEdit:g.editMedia,onDelete:g.deleteMedia},null,8,["media-files","backend-base-url","loading","onRefresh","onEdit","onDelete"])])]),(0,l.bF)(f,{modelValue:g.editDialog,"onUpdate:modelValue":a[1]||(a[1]=e=>g.editDialog=e),media:g.selectedMedia,onSave:g.handleEditSave},null,8,["modelValue","media","onSave"]),(0,l.bF)(f,{modelValue:g.editDialog,"onUpdate:modelValue":a[2]||(a[2]=e=>g.editDialog=e),media:g.selectedMedia,onSave:g.handleEditSave},null,8,["modelValue","media","onSave"])])}var h=o(953),v=o(220),b=o(246),p=o(840),k=o(697),M=o(661),E=o(503),f=o(714),y=o(725),U=o(891),w=o(889),D={name:"MediaManager",components:{ThemeToggle:k.A,MediaUploader:M.A,MediaGallery:E.A,EditMediaDialog:f.A},setup(){console.log("ðŸŽ¬ MediaManager component setup() called"),console.log("ðŸ“ Current URL:",window.location.href);(0,v.rd)();const e=(0,v.lq)(),a=(0,b.dj)(),o=(0,p.Jud)(),{isDarkMode:i}=(0,y.D)(),{backendBaseUrl:r}=(0,U.f)(),d=(0,h.KR)([]),n=(0,h.KR)(!1),t=(0,h.KR)(!1),c=(0,h.KR)(null),s=async()=>{console.log("ðŸ“ Cargando medios..."),n.value=!0;try{const e=await w.DX.list();d.value=e.data||[],console.log(`âœ… ${d.value.length} archivos multimedia cargados`)}catch(e){console.error("âŒ Error cargando medios:",e),a.error("Error al cargar los archivos multimedia"),d.value=[]}finally{n.value=!1}},u=async(e,a)=>{try{return await w.DX.update(e,a),!0}catch(o){throw console.error("âŒ Error actualizando medio:",o),o}},m=async e=>{try{return await w.DX.delete(e),!0}catch(a){throw console.error("âŒ Error eliminando medio:",a),a}},g=e=>{console.log("âœ… Archivo subido exitosamente:",e),a.success(`Archivo "${e.filename}" subido correctamente`),s()},k=e=>{console.error("âŒ Error en subida:",e),a.error("Error al subir el archivo")},M=e=>{console.log("âœï¸ Editando medio:",e),c.value=e,t.value=!0},E=async e=>{try{await u(e.id,e),a.success("Medio actualizado correctamente"),t.value=!1,s()}catch(o){console.error("âŒ Error actualizando medio:",o),a.error("Error al actualizar el medio")}},f=async e=>{o.dialog({title:"Confirmar eliminaciÃ³n",message:"Â¿EstÃ¡s seguro de que quieres eliminar este archivo multimedia?",cancel:!0,persistent:!0}).onOk((async()=>{try{await m(e),a.success("Archivo eliminado correctamente"),s()}catch(o){console.error("âŒ Error eliminando medio:",o),a.error("Error al eliminar el archivo")}}))};return(0,l.sV)((async()=>{console.log("ðŸš€ MediaManager mounted"),o.dark.set(i.value),await s()})),{mediaFiles:d,mediaLoading:n,editDialog:t,selectedMedia:c,backendBaseUrl:r,$route:e,loadMedia:s,handleUploadComplete:g,handleUploadError:k,editMedia:M,handleEditSave:E,deleteMedia:f}}},L=o(262);const C=(0,L.A)(D,[["render",g],["__scopeId","data-v-961aeda2"]]);var A=C}}]);
//# sourceMappingURL=403.08a85daf.js.map